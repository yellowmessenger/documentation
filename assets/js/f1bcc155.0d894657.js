"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[40942],{603905:function(e,t,o){o.d(t,{Zo:function(){return p},kt:function(){return m}});var n=o(667294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var l=n.createContext({}),c=function(e){var t=n.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},k=n.forwardRef((function(e,t){var o=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(o),k=a,m=d["".concat(l,".").concat(k)]||d[k]||u[k]||r;return o?n.createElement(m,i(i({ref:t},p),{},{components:o})):n.createElement(m,i({ref:t},p))}));function m(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=o.length,i=new Array(r);i[0]=k;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:a,i[1]=s;for(var c=2;c<r;c++)i[c]=o[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}k.displayName="MDXCreateElement"},805721:function(e,t,o){o.r(t),o.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return k},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return d}});var n=o(487462),a=o(263366),r=(o(667294),o(603905)),i=["components"],s={title:"Display message or sync data when a Live Chat is closed",sidebar_label:"Trigger actions upon chat resolution"},l=void 0,c={unversionedId:"cookbooks/inbox/ticketclose-message",id:"cookbooks/inbox/ticketclose-message",title:"Display message or sync data when a Live Chat is closed",description:"When a customer initiates a live chat, an inbox agent takes on the task of resolving the query. Once the agent has resolved the query, they mark the chat as Resolved. This triggers the execution of the node connected to the ticket closed in the raise ticket node, which is followed by the other nodes connected to it.",source:"@site/docs/cookbooks/inbox/ticketclose-message.md",sourceDirName:"cookbooks/inbox",slug:"/cookbooks/inbox/ticketclose-message",permalink:"/docs/cookbooks/inbox/ticketclose-message",draft:!1,tags:[],version:"current",frontMatter:{title:"Display message or sync data when a Live Chat is closed",sidebar_label:"Trigger actions upon chat resolution"},sidebar:"cookbooks",previous:{title:"Enable close ticket for agents on app screen",permalink:"/docs/cookbooks/inbox/closeticketforapp"},next:{title:"Ticket notification to unavailable agents",permalink:"/docs/cookbooks/inbox/notifyagents"}},p={},d=[{value:"Step 1: Attach nodes to ticket closed",id:"step-1-attach-nodes-to-ticket-closed",level:2},{value:"Step 2: Activate ticket-closed event",id:"step-2-activate-ticket-closed-event",level:2},{value:"Step 3: Trigger flows after a ticket is resolved",id:"step-3-trigger-flows-after-a-ticket-is-resolved",level:2},{value:"Use-cases of ticket-closed event",id:"use-cases-of-ticket-closed-event",level:3}],u={toc:d};function k(e){var t=e.components,o=(0,a.Z)(e,i);return(0,r.kt)("wrapper",(0,n.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"When a customer initiates a live chat, an inbox agent takes on the task of resolving the query. Once the agent has resolved the query, they mark the chat as ",(0,r.kt)("strong",{parentName:"p"},"Resolved"),". This triggers the execution of the node connected to the ",(0,r.kt)("strong",{parentName:"p"},"ticket closed")," in the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/action-nodes#raise-ticket-outputs"},"raise ticket")," node, which is followed by the other nodes connected to it."),(0,r.kt)("p",null,"After a chat has ended, you may want to perform actions like updating a database, calling an API, sending customer details to the CSM, or displaying promotional messages or products. However, you cannot connect the ",(0,r.kt)("strong",{parentName:"p"},"ticket closed")," part of the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/action-nodes#raise-ticket-outputs"},"raise ticket")," node to both options simultaneously. In this case, you can use an ",(0,r.kt)("strong",{parentName:"p"},"event")," to identify the ticket closed and perform background actions on a different flow. "),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"If the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/inbox/inbox-settings/workflows/csat"},"CSAT setting")," is enabled, the system records the customer feedback on the agent before closing the chat.")),(0,r.kt)("p",null,"To configure the system to automatically trigger an event when agents resolve a live chat, you need to manually enable it from the event hub and use it in the flows."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"step-1-attach-nodes-to-ticket-closed"},"Step 1: Attach nodes to ticket closed"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"To attach nodes to ticket closed, connect the ",(0,r.kt)("strong",{parentName:"p"},"Raise ticket")," > ",(0,r.kt)("strong",{parentName:"p"},"Ticket closed")," with the nodes you want to execute. This will get triggered after the ticket is closed.\n",(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/tFTr2P5.png",alt:null})),(0,r.kt)("admonition",{parentName:"li",type:"info"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"This step is recommended but not mandatory, it is required to make sure that the flow is completed and the user is intimidated that the ticket is closed."),(0,r.kt)("li",{parentName:"ul"},"You can also add options in this flow that connects to other flows to improve your user experience."))))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"step-2-activate-ticket-closed-event"},"Step 2: Activate ticket-closed event"),(0,r.kt)("p",null,"To identify that the inbox agent has closed a ticket you must enable ",(0,r.kt)("strong",{parentName:"p"},"Ticket closed")," event. Follow these steps: "),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("strong",{parentName:"li"},"Automation")," > ",(0,r.kt)("strong",{parentName:"li"},"Events")," > ",(0,r.kt)("strong",{parentName:"li"},"Inbox")," and search for ",(0,r.kt)("inlineCode",{parentName:"li"},"ticket-closed"),".\n",(0,r.kt)("img",{parentName:"li",src:"https://i.imgur.com/qZYPSZ2.png",alt:null})),(0,r.kt)("li",{parentName:"ol"},"Click the three dots icon and select ",(0,r.kt)("strong",{parentName:"li"},"Activate")," to activate the event.")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"step-3-trigger-flows-after-a-ticket-is-resolved"},"Step 3: Trigger flows after a ticket is resolved"),(0,r.kt)("p",null,"You can design flows that can be triggered when ",(0,r.kt)("strong",{parentName:"p"},"Ticket closed event")," is identified. Follow these steps: "),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Create a new ",(0,r.kt)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/Flows/journeys"},"flow"),". "),(0,r.kt)("li",{parentName:"ol"},"By clicking ",(0,r.kt)("strong",{parentName:"li"},"Start")," node you can set when the flow gets triggered. Set it to ",(0,r.kt)("strong",{parentName:"li"},"Event")," and select the value as ",(0,r.kt)("strong",{parentName:"li"},"ticket-closed"),".\n",(0,r.kt)("img",{parentName:"li",src:"https://i.imgur.com/5J4tjm4.png",alt:null})),(0,r.kt)("li",{parentName:"ol"},"To provide a personalized response from the bot when a ticket is closed, add ",(0,r.kt)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes"},"nodes")," to the flow that are designed to execute specific tasks. The flow will automatically run whenever a ticket is closed.")),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"use-cases-of-ticket-closed-event"},"Use-cases of ticket-closed event"),(0,r.kt)("p",null,"A few examples of the flows that can be run after the ticket is closed."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"You can add one or more flows with start trigger as ",(0,r.kt)("inlineCode",{parentName:"p"},"ticket-closed"),". All these flows will run simultaneously. ")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Update a database/CRM with ticket details."),"\n",(0,r.kt)("img",{parentName:"p",src:"https://imgur.com/g9uUpoQ.png",alt:null}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Create a logic to filter the user data based on the type of query raised and send it to a CRM/Database."),"\n",(0,r.kt)("img",{parentName:"p",src:"https://imgur.com/73wkH2V.png",alt:null}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Hit an API once the ticket is closed."),"\n",(0,r.kt)("img",{parentName:"p",src:"https://imgur.com/EfdUa9t.png",alt:null}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Send a promotional messsage."),"\n",(0,r.kt)("img",{parentName:"p",src:"https://imgur.com/hxUl23L.png",alt:null}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Schedule a follow up interview."),"\n",(0,r.kt)("img",{parentName:"p",src:"https://imgur.com/MzKzN7U.png",alt:null})))))}k.isMDXComponent=!0}}]);