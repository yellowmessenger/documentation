"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[55908],{603905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return f}});var r=n(667294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),l=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=l(e.components);return r.createElement(p.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=l(n),m=a,f=c["".concat(p,".").concat(m)]||c[m]||d[m]||i;return n?r.createElement(f,o(o({ref:t},u),{},{components:n})):r.createElement(f,o({ref:t},u))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[c]="string"==typeof e?e:a,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},524791:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return p},default:function(){return m},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return c}});var r=n(487462),a=n(263366),i=(n(667294),n(603905)),o=["components"],s={title:"User identification flow",sidebar_label:"User identification flow"},p=void 0,l={unversionedId:"platform_concepts/engagement/cdp/user_data/userid-flow",id:"platform_concepts/engagement/cdp/user_data/userid-flow",title:"User identification flow",description:"Overview",source:"@site/docs/platform_concepts/engagement/cdp/user_data/userid-flow.md",sourceDirName:"platform_concepts/engagement/cdp/user_data",slug:"/platform_concepts/engagement/cdp/user_data/userid-flow",permalink:"/docs/platform_concepts/engagement/cdp/user_data/userid-flow",draft:!1,tags:[],version:"current",frontMatter:{title:"User identification flow",sidebar_label:"User identification flow"},sidebar:"platform_concepts",previous:{title:"How are user records created from conversations & unified in User 360",permalink:"/docs/platform_concepts/engagement/cdp/user_data/data_capture_convers"},next:{title:"Add/update user properties from AI-agent conversations",permalink:"/docs/platform_concepts/engagement/cdp/user_data/store_conv_data"}},u={},c=[{value:"Overview",id:"overview",level:2},{value:"Significance of identifying users",id:"significance-of-identifying-users",level:3},{value:"Understand how user identification flow works",id:"understand-how-user-identification-flow-works",level:3},{value:"Setup user identification flow",id:"setup-user-identification-flow",level:2},{value:"Phone identifier flow",id:"phone-identifier-flow",level:3},{value:"Email identifier flow",id:"email-identifier-flow",level:3},{value:"Custom property identifier flow",id:"custom-property-identifier-flow",level:3},{value:"3. To capture user property values from bot script",id:"3-to-capture-user-property-values-from-bot-script",level:4},{value:"4. To capture property values from API response",id:"4-to-capture-property-values-from-api-response",level:4}],d={toc:c};function m(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"The User Identification flow in AI-agent conversation is the process of identifying the user interacting with the AI-agent. This is achieved by requesting the unique identifier from the user. It could be an email address, phone number or other identifier. "),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Date datatypes are not supported for the userId. It supports String, Number, email, and phone types.")),(0,i.kt)("h3",{id:"significance-of-identifying-users"},"Significance of identifying users"),(0,i.kt)("p",null,"The user identification is an important aspect of AI-agent conversation design, as it allows for a more personalized and engaging user experience. User identification helps in the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Personalized responses"),": When a user is identified, the AI-agent can tailor its responses to the individual user's needs and preferences. This can lead to more relevant and helpful responses, which can improve the overall user experience."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Context maintenance"),": User identification allows the AI-agent to maintain context throughout the conversation and across different channels. This means that the AI-agent can use user data and the interaction with the user, and use that information to provide more accurate and useful responses in subsequent interactions."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Improved engagement"),": By providing personalized responses and maintaining context, the AI-agent can create a more engaging conversation with the user. This can lead to increased user satisfaction and higher levels of engagement with the AI-agent."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Better data collection"),": User identification also allows the AI-agent to collect more detailed and accurate data on individual users. This can be used to improve the AI-agent's performance over time, by providing insights into user behavior and preferences.")),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"understand-how-user-identification-flow-works"},"Understand how user identification flow works"),(0,i.kt)("p",null,"The primary objective of the User Identification flow is to ensure that the userId is captured for users that interact with the AI-agent on any channel. "),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"If the ",(0,i.kt)("inlineCode",{parentName:"p"},"userId")," is not captured before initiating a conversation, a blank user record is created without a ",(0,i.kt)("inlineCode",{parentName:"p"},"userId")," with a user starts conversation. If capturing of userId is not managed properly, it may result in the creation of duplicate records for the same user, one with a userId and one without. This can also lead to the creation of multiple unidentified records for different sessions.")),(0,i.kt)("p",null,"The following are the steps involved:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"You first need to define the user property that needs to considered as the userId. Whenever the selected property is updated, the userId will be automatically updated with the same value."),(0,i.kt)("p",{parentName:"li"},"For example, if you select the ",(0,i.kt)("inlineCode",{parentName:"p"},"phone")," user property, each time a value is captured for the phone property, that same value will also be automatically copied and assigned to the userId field.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"At the beginning of every conversation, the AI-agent verifies if the userId is known. ")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"If it is not known, the ",(0,i.kt)("strong",{parentName:"p"},"User identification flow")," is triggered to capture the userId."))),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"For details on how user records are created through conversations and unified in User 360, see ",(0,i.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/engagement/cdp/user_data/data_capture_convers"},"this article"),".")),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"setup-user-identification-flow"},"Setup user identification flow"),(0,i.kt)("p",null,"To add the User identification flow to your AI-agent, follow these steps:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"In Automation, click ",(0,i.kt)("strong",{parentName:"p"},"Build")," > ",(0,i.kt)("strong",{parentName:"p"},"Conversation settings"),"."),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{parentName:"p",src:"https://imgur.com/wJg2jQ2.png",alt:null})))),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"On the pop-up screen that appears, click ",(0,i.kt)("strong",{parentName:"p"},"User identification"),"."),(0,i.kt)("center",null,(0,i.kt)("img",{src:"https://i.imgur.com/dqW7gKF.png",width:"60%"}))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Select the relevant identification flow - ",(0,i.kt)("a",{parentName:"p",href:"#phone-identifier-flow"},"Phone identification flow"),", ",(0,i.kt)("a",{parentName:"p",href:"#email-identifier-flow"},"Email identification flow")," or ",(0,i.kt)("a",{parentName:"p",href:"#custom-property-flow"},"Custom property flow"),"."),(0,i.kt)("img",{src:"https://i.imgur.com/BGOG8WX.png",width:""}))),(0,i.kt)("h3",{id:"phone-identifier-flow"},"Phone identifier flow"),(0,i.kt)("p",null,"   Select this option if the ",(0,i.kt)("inlineCode",{parentName:"p"},"phone")," user property serves as the unique identifier for your users. Make sure to collect the phone number and store it in the ",(0,i.kt)("inlineCode",{parentName:"p"},"phone")," user property, which is already set by default for this identifier flow."),(0,i.kt)("p",null,"   ",(0,i.kt)("img",{parentName:"p",src:"https://i.imgur.com/1GIGNvw.png",alt:null})),(0,i.kt)("h3",{id:"email-identifier-flow"},"Email identifier flow"),(0,i.kt)("p",null," Select this option if ",(0,i.kt)("inlineCode",{parentName:"p"},"email")," user property serves as the unique identifier for your users. Make sure to collect the email address and store it in the ",(0,i.kt)("inlineCode",{parentName:"p"},"email")," user property, which is already set by default for this identifier flow."),(0,i.kt)("p",null,"   ",(0,i.kt)("img",{parentName:"p",src:"https://i.imgur.com/52UpNaU.png",alt:null})),(0,i.kt)("h3",{id:"custom-property-identifier-flow"},"Custom property identifier flow"),(0,i.kt)("p",null,"Select this option if the unique identifier of your users is any property other than email or phone. In this case:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Choose the custom property that serves as the unique identifier for your users. Please note that only String, Number, email, and phone data types are supported for the custom property."),(0,i.kt)("img",{src:"https://i.imgur.com/fqhxItb.png",width:"50%"})),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"To create a new property and store it as userId, click on ",(0,i.kt)("strong",{parentName:"p"},"+Create new user property")," > Enter ",(0,i.kt)("strong",{parentName:"p"},"Property name")," and choose ",(0,i.kt)("strong",{parentName:"p"},"Property type")," > Click ",(0,i.kt)("strong",{parentName:"p"},"Add"),"."),(0,i.kt)("img",{src:"/img/cdp/customproperty.png",width:"60%"})),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Collect property value."),(0,i.kt)("h4",{parentName:"li",id:"1-to-collect-property-values-from-user-input"},"1. To collect property values from user input"),(0,i.kt)("p",{parentName:"li"},"Collect the selected user property using the ",(0,i.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/prompt-nodes"},"Prompt node")," and use ",(0,i.kt)("strong",{parentName:"p"},"Save response in")," to map the variable to the user property."),(0,i.kt)("h4",{parentName:"li",id:"2-to-capture-property-values-from-other-variables"},"2. To capture property values from other variables"),(0,i.kt)("p",{parentName:"li"}," If you want to capture user properties from other variables, use the syntax: ",(0,i.kt)("inlineCode",{parentName:"p"},"{{variables.variableName}}")),(0,i.kt)("img",{src:"https://imgur.com/Giwso6b.png",width:"70%"}))),(0,i.kt)("h4",{id:"3-to-capture-user-property-values-from-bot-script"},"3. To capture user property values from bot script"),(0,i.kt)("p",null,"   For example, in the sample script below, to capture the phone number as the userId:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'`<script type="text/javascript">`  \nwindow.ymConfig = {"bot":"x1673261303850","host":"[https://cloud.yellow.ai](https://cloud.yellow.ai/)", "payload":{"name":"Tom","phoneNumber":"9090000000","email":"[tom@example.com](mailto:email@example.com)"},};  \n(function() {  \nvar w = window,  \nic = w.YellowMessenger;  \nif ("function" === typeof ic) ic("reattach_activator"), ic("update", ymConfig);  \nelse {  \nvar d = document,  \ni = function() {  \ni.c(arguments)  \n};  \nfunction l() {  \nvar e = d.createElement("script");  \ne.type = "text/javascript", e.async = !0, e.src = "[https://cdn.yellowmessenger.com/plugin/widget-v2/latest/dist/main.min.js](https://cdn.yellowmessenger.com/plugin/widget-v2/latest/dist/main.min.js)";  \nvar t = d.getElementsByTagName("script")[0];  \nt.parentNode.insertBefore(e, t)  \n}  \ni.q = [], i.c = function(e) {  \ni.q.push(e)  \n}, w.YellowMessenger = i, w.attachEvent ? w.attachEvent("onload", l) : w.addEventListener("load", l, !1)}  \n})();  \n<\/script>\n\n')),(0,i.kt)("p",null,"You can use the Function node to capture and store the variable in the respective user property."),(0,i.kt)("p",null,"   For instance, here ",(0,i.kt)("inlineCode",{parentName:"p"},"returnId")," is the function name containing the provided code. "),(0,i.kt)("p",null,"   To access property vallues from the ",(0,i.kt)("inlineCode",{parentName:"p"},"payload")," schema above, you can use the syntax: ",(0,i.kt)("inlineCode",{parentName:"p"},"data.profile.payload"),". "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'return new Promise(resolve => {\n   let payload = data.profile.payload\n   if (typeof (payload) === "string") {\n      payload = JSON.parse(payload);\n   }\n   console.log(payload);\n   ymLib.logger.log(payload,"init--Payload");\n   resolve(payload)\n});\n')),(0,i.kt)("p",null,"   Store the response returned by the Function in the corresponding variable, in this case, 'userId`."),(0,i.kt)("img",{src:"https://i.imgur.com/qqltmgO.png",width:"70%"}),(0,i.kt)("h4",{id:"4-to-capture-property-values-from-api-response"},"4. To capture property values from API response"),(0,i.kt)("p",null,"   First, store the response payload in an object variable."),(0,i.kt)("img",{src:"https://i.imgur.com/ZdyD8u7.png",width:""}),(0,i.kt)("p",null,"   Sample response payload"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'{\n   "name": "Tom",\n   "phoneNumber":"9090000000",\n   "email":"tom@example.com"\n}\n')),(0,i.kt)("p",null,"   To access a specific key value from the object variable, use the syntax:  ",(0,i.kt)("inlineCode",{parentName:"p"},"{{{variables.objVariableName.key}}}")),(0,i.kt)("img",{src:"https://i.imgur.com/vwCUkDo.png",width:"60%"}),(0,i.kt)("p",null,"   For example:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"{{{variables.userData.phoneNumber}}}")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"{{{variables.userData.email}}}"))),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},"You can also use SDK APIs to programmatically set user properties and the user ID. "),(0,i.kt)("li",{parentName:"ul"},"You can also make use of Function to extract the required information from a payload. "))),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"What next?")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"See ",(0,i.kt)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/engagement/cdp/user_data/store_conv_data"},"how to capture user properties from AI-agent conversation"),"."),(0,i.kt)("li",{parentName:"ul"},"Know ",(0,i.kt)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/engagement/cdp/user_data/personalise_conversations"},"how to create personalized conversations in AI-agent conversations"))))}m.isMDXComponent=!0}}]);