"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[74598],{603905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return f}});var o=n(667294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(n),m=a,f=d["".concat(s,".").concat(m)]||d[m]||u[m]||i;return n?o.createElement(f,r(r({ref:t},p),{},{components:n})):o.createElement(f,r({ref:t},p))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:a,r[1]=l;for(var c=2;c<i;c++)r[c]=n[c];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},985606:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return d}});var o=n(487462),a=n(263366),i=(n(667294),n(603905)),r=["components"],l={title:"Notify customers on agent unavailability when offline handling is enabled",sidebar_label:"Notify customer on offline handling",keywords:["offline ticketing","offline chat"]},s=void 0,c={unversionedId:"cookbooks/inbox/notifycustomerofflinehandling",id:"cookbooks/inbox/notifycustomerofflinehandling",title:"Notify customers on agent unavailability when offline handling is enabled",description:"Prerequisite: Enable offline handling settings as described here.",source:"@site/docs/cookbooks/inbox/notifycustomerofflinehandling.md",sourceDirName:"cookbooks/inbox",slug:"/cookbooks/inbox/notifycustomerofflinehandling",permalink:"/docs/cookbooks/inbox/notifycustomerofflinehandling",draft:!1,tags:[],version:"current",frontMatter:{title:"Notify customers on agent unavailability when offline handling is enabled",sidebar_label:"Notify customer on offline handling",keywords:["offline ticketing","offline chat"]},sidebar:"cookbooks",previous:{title:"Use raise ticket node w/o input",permalink:"/docs/cookbooks/inbox/transferwithoutinfo"},next:{title:"Configure video call URLs",permalink:"/docs/cookbooks/inbox/videourl"}},p={},d=[{value:"Notification for open and queued chats",id:"notification-for-open-and-queued-chats",level:2},{value:"Notification for open chats (recommended)",id:"notification-for-open-chats-recommended",level:2},{value:"Expected behaviour after creating a flow to notify customers",id:"expected-behaviour-after-creating-a-flow-to-notify-customers",level:2}],u={toc:d};function m(e){var t=e.components,n=(0,a.Z)(e,r);return(0,i.kt)("wrapper",(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("strong",{parentName:"p"},"Prerequisite"),": Enable ",(0,i.kt)("strong",{parentName:"p"},"offline handling")," settings as described ",(0,i.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/inbox/inbox-settings/workflows/offline-chat"},"here"),".")),(0,i.kt)("p",null,"When ",(0,i.kt)("strong",{parentName:"p"},"Offline handling")," is enabled and you want to inform customers that agents are currently unavailable and their queries will be addressed once an agent is back online, follow the steps below by picking your closest use-case:"),(0,i.kt)("h2",{id:"notification-for-open-and-queued-chats"},"Notification for open and queued chats"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Navigate to ",(0,i.kt)("strong",{parentName:"p"},"Automation > Flows"),", open the flow that includes the ",(0,i.kt)("strong",{parentName:"p"},"Raise ticket")," node.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Store the output of the ",(0,i.kt)("strong",{parentName:"p"},"Raise ticket")," node in a variable, as shown in the image."),(0,i.kt)("img",{src:"https://hackmd.io/_uploads/ByjDHFLbp.png",alt:"drawing",width:"80%"})),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Connect the error part of the ",(0,i.kt)("strong",{parentName:"p"},"Raise ticket")," node to a new node, which is responsible for displaying messages to the customer. "),(0,i.kt)("blockquote",{parentName:"li"},(0,i.kt)("p",{parentName:"blockquote"},"When offline handling is enabled, the chat is not immediately answered, and the flow continues to the next node until an agent responds.")),(0,i.kt)("img",{src:"https://imgur.com/7zug9iN.png",alt:"drawing",width:"100%"})),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"In the new flow, retrieve the status of the ticket by accessing the status value stored in the variable ",(0,i.kt)("inlineCode",{parentName:"p"},"{{{variables.raiseTicketObj.status}}}"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Add a ",(0,i.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/logic-nodes#1-condition"},"condition node")," to your flow to identify the ticket status."),(0,i.kt)("img",{src:"https://hackmd.io/_uploads/SkQdvY8WT.png",alt:"drawing",width:"80%"})),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Depending on the ticket status identified in the condition node, you can connect the conditions to a Text node to display a relevant message addressing the customer.\n",(0,i.kt)("img",{parentName:"p",src:"https://hackmd.io/_uploads/B1scOF8bp.png",alt:null})),(0,i.kt)("blockquote",{parentName:"li"},(0,i.kt)("p",{parentName:"blockquote"},"You can also fetch the ticket ID by using the variable: ",(0,i.kt)("inlineCode",{parentName:"p"},"{{{variables.activeTicketNumber}}}"))))),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"notification-for-open-chats-recommended"},"Notification for open chats (recommended)"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Access the ",(0,i.kt)("strong",{parentName:"li"},"Automation")," section and navigate to ",(0,i.kt)("strong",{parentName:"li"},"Events"),"."),(0,i.kt)("li",{parentName:"ol"},"Open the ",(0,i.kt)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/studio/events/event-hub"},"Custom events")," and click ",(0,i.kt)("strong",{parentName:"li"},"+Add event"),".\n",(0,i.kt)("img",{parentName:"li",src:"https://hackmd.io/_uploads/HkG89gJP2.png",alt:null})),(0,i.kt)("li",{parentName:"ol"},"Provide the ",(0,i.kt)("strong",{parentName:"li"},"name")," ",(0,i.kt)("inlineCode",{parentName:"li"},"ticket-opened")," and click ",(0,i.kt)("strong",{parentName:"li"},"Create event"),".\n",(0,i.kt)("img",{parentName:"li",src:"https://hackmd.io/_uploads/B1cqqgkDh.png",alt:null})),(0,i.kt)("li",{parentName:"ol"},"Ensure that the ",(0,i.kt)("inlineCode",{parentName:"li"},"ticket-open")," event is ",(0,i.kt)("strong",{parentName:"li"},"Active"),". If not, make it Active by clicking on the three dots next to it.\n",(0,i.kt)("img",{parentName:"li",src:"https://hackmd.io/_uploads/B18Zjx1D2.png",alt:null})),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/Flows/journeys"},"Create a new flow")," in the ",(0,i.kt)("strong",{parentName:"li"},"Automation")," > ",(0,i.kt)("strong",{parentName:"li"},"Build"),".\n",(0,i.kt)("img",{parentName:"li",src:"https://hackmd.io/_uploads/B1rOixkD2.png",alt:null})),(0,i.kt)("li",{parentName:"ol"},"Within the flow, add a start trigger by clicking on the start node. Select ",(0,i.kt)("strong",{parentName:"li"},"event")," from the dropdown and set the value as ",(0,i.kt)("inlineCode",{parentName:"li"},"ticket-opened"),".\n",(0,i.kt)("img",{parentName:"li",src:"https://hackmd.io/_uploads/ryKShx1wh.png",alt:null})),(0,i.kt)("li",{parentName:"ol"},"Add a text node to display an acknowledgment to the customer, informing them to wait for a while.\n",(0,i.kt)("img",{parentName:"li",src:"https://hackmd.io/_uploads/BkgF2eJw2.png",alt:null}))),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"expected-behaviour-after-creating-a-flow-to-notify-customers"},"Expected behaviour after creating a flow to notify customers"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Assume all the agents are offline at the same time and a customer has requested to talk to an agent.")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"A live chat request is raised")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},'The live chat appears in the "Open chats" section of the inbox')),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"The customer waits on the chat screen")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},'A message is displayed to the customer, stating the delay: "Your chat will be assigned as soon as we find an available agent. Please wait, and thank you for your patience"')),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"When any agent in that group comes online and becomes available, the live chat is immediately assigned to them")))}m.isMDXComponent=!0}}]);