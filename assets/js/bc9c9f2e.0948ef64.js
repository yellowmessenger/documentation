"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[23708],{28453:(n,t,e)=>{e.d(t,{R:()=>a,x:()=>r});var i=e(96540);const s={},o=i.createContext(s);function a(n){const t=i.useContext(o);return i.useMemo(function(){return"function"==typeof n?n(t):{...t,...n}},[t,n])}function r(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:a(n.components),i.createElement(o.Provider,{value:t},n.children)}},93092:(n,t,e)=>{e.r(t),e.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"platform_concepts/channelConfiguration/chat-history","title":"Fetch Chat widget history","description":"Chat history is a series of conversations that have happened between a user and an AI-agent. The chat history includes details such as user\u2019s input, AI-agent responses, and the date and time of the conversation.","source":"@site/docs/platform_concepts/channelConfiguration/chat-history.md","sourceDirName":"platform_concepts/channelConfiguration","slug":"/platform_concepts/channelConfiguration/chat-history","permalink":"/docs/platform_concepts/channelConfiguration/chat-history","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Fetch Chat widget history","sidebar_label":"Fetch Chat widget history"},"sidebar":"platform_concepts","previous":{"title":"Chat widget payload","permalink":"/docs/platform_concepts/channelConfiguration/chat-widget-payload"},"next":{"title":"Chat widget functions","permalink":"/docs/platform_concepts/channelConfiguration/function-widgets"}}');var s=e(74848),o=e(28453);const a={title:"Fetch Chat widget history",sidebar_label:"Fetch Chat widget history"},r=void 0,c={},h=[{value:"1. Pass ymAuthentication for a chat widget",id:"1-pass-ymauthentication-for-a-chat-widget",level:2},{value:"1.1 Pass ymAuthentication token via script",id:"11-pass-ymauthentication-token-via-script",level:3},{value:"1.2 Pass ymAuthentication token via init function",id:"12-pass-ymauthentication-token-via-init-function",level:3},{value:"1.3 Pass ymAuthentication token for PWA bot",id:"13-pass-ymauthentication-token-for-pwa-bot",level:3}];function l(n){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"Chat history is a series of conversations that have happened between a user and an AI-agent. The chat history includes details such as user\u2019s input, AI-agent responses, and the date and time of the conversation."}),"\n",(0,s.jsx)(t.p,{children:"Chat history retrieves past conversations that tailor future interactions. It helps the AI-agent to analyse the user\u2019s inputs and provide accurate automated responses to the user\u2019s queries. Thereby, it improves the overall efficiency and reliability of the AI-agent."}),"\n",(0,s.jsx)(t.p,{children:"Let's say that you want to fetch a user's chat history from an AI-agent. To do so, you need to pass a unique identifier, the ymAuthentication token, via an AI-agent script, payload, or\xa0init function."}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Ensure that the ymAuthentication token is secured and only authorized users can access it."}),"\n",(0,s.jsx)(t.li,{children:"Chat history can be retained for a maximum duration of 6 months."}),"\n",(0,s.jsx)(t.li,{children:"Ensure that ymAuthenticationToken is passed in string format."}),"\n"]})}),"\n",(0,s.jsx)(t.p,{children:"In this article, you will learn:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"#1-pass-ymauthentication-for-a-chat-widget",children:"How to pass ymAuthentication token for a chat widget?"})}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Prerequisites to pass ymAuthentication token:"})}),"\n",(0,s.jsxs)(t.p,{children:["Before you passing the ymAuthentication token via the script, payload, or init function, you need to enable ",(0,s.jsx)(t.strong,{children:"Show history of the conversation"})," in the ",(0,s.jsx)(t.strong,{children:"Settings"})," page."]}),"\n",(0,s.jsx)("img",{src:"https://imgur.com/SIXwl4x.png",alt:"drawing",width:"70%"}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsx)(t.p,{children:'When the "Create New Tab session" flag is enabled, history will not be retained on page refresh even if "Show History" is set to true and the ymAuthenticationToken is passed.'})}),"\n",(0,s.jsx)(t.p,{children:'To enable "Show history of the conversation", follow these steps:'}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["On the left navigation bar, click ",(0,s.jsx)(t.strong,{children:"Extensions"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://imgur.com/VFuwPIE.png",alt:""})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Click on ",(0,s.jsx)(t.strong,{children:"Chat widget"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://imgur.com/c3JFOYN.png",alt:""})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"The Chat widget screen appears as shown below."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://imgur.com/emOQHQU.png",alt:""})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Navigate to the ",(0,s.jsx)(t.strong,{children:"Settings"})," tab, expand ",(0,s.jsx)(t.strong,{children:"Chat history"})," and enable ",(0,s.jsx)(t.strong,{children:"Show history of the conversation"}),"."]}),"\n",(0,s.jsx)("img",{src:"https://imgur.com/zRhSZKD.png",alt:"drawing",width:"70%"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"1-pass-ymauthentication-for-a-chat-widget",children:"1. Pass ymAuthentication for a chat widget"}),"\n",(0,s.jsx)(t.p,{children:"Chat history is fetched with the help of a unique token generated for each user who logs into your platform. Once this token is generated, you can verify if a user has been authenticated."}),"\n",(0,s.jsx)(t.h3,{id:"11-pass-ymauthentication-token-via-script",children:"1.1 Pass ymAuthentication token via script"}),"\n",(0,s.jsx)(t.p,{children:"To pass ymAuthentication token via script, follow these steps:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["On the left navigation bar, click ",(0,s.jsx)(t.strong,{children:"Extensions"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://imgur.com/VFuwPIE.png",alt:""})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Click on ",(0,s.jsx)(t.strong,{children:"Chat widget"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://imgur.com/c3JFOYN.png",alt:""})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"The Chat widget screen appears as shown below."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://imgur.com/emOQHQU.png",alt:""})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Navigate to the ",(0,s.jsx)(t.strong,{children:"Deploy > Web > COPY CODE TO Install bot"}),". A bot script is copied."]}),"\n",(0,s.jsx)("img",{src:"https://imgur.com/veIKcth.png",alt:"drawing",width:"60%"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Sample bot script:"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-c",children:'<script type="text/javascript">\nwindow.ymConfig = {"bot":"x1657623696077",\n"host":"https://cloud.yellow.ai"};\n(function() {\n    var w = window,\n        ic = w.YellowMessenger;\n    if ("function" === typeof ic) ic("reattach_activator"), ic("update", ymConfig);\n    else {\n        var d = document,\n            i = function() {\n                i.c(arguments)\n            };\n\n        function l() {\n            var e = d.createElement("script");\n            e.type = "text/javascript", e.async = !0, e.src = "https://cdn.yellowmessenger.com/plugin/widget-v2/latest/dist/main.min.js";\n            var t = d.getElementsByTagName("script")[0];\n            t.parentNode.insertBefore(e, t)\n        }\n        i.q = [], i.c = function(e) {\n            i.q.push(e)\n        }, w.YellowMessenger = i, w.attachEvent ? w.attachEvent("onload", l) : w.addEventListener("load", l, !1)\n    }\n})(); \n<\/script>\n'})}),"\n",(0,s.jsxs)(t.p,{children:["To fetch the user's chat history from a AI-agent, add the ",(0,s.jsx)(t.strong,{children:"ymAuthentication"})," token in the following AI-agent script:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-c",children:'<script type="text/javascript">\nwindow.ymConfig = {"bot":"x1657623696077","host":"https://cloud.yellow.ai", "ymAuthenticationToken": "1234"};  // Add ymAuthenticationToken here\n(function() {\n    var w = window,\n        ic = w.YellowMessenger;\n    if ("function" === typeof ic) ic("reattach_activator"), ic("update", ymConfig);\n    else {\n        var d = document,\n            i = function() {\n                i.c(arguments)\n            };\n\n        function l() {\n            var e = d.createElement("script");\n            e.type = "text/javascript", e.async = !0, e.src = "https://cdn.yellowmessenger.com/plugin/widget-v2/latest/dist/main.min.js";\n            var t = d.getElementsByTagName("script")[0];\n            t.parentNode.insertBefore(e, t)\n        }\n        i.q = [], i.c = function(e) {\n            i.q.push(e)\n        }, w.YellowMessenger = i, w.attachEvent ? w.attachEvent("onload", l) : w.addEventListener("load", l, !1)\n    }\n})(); \n<\/script>\n'})}),"\n",(0,s.jsx)(t.h3,{id:"12-pass-ymauthentication-token-via-init-function",children:"1.2 Pass ymAuthentication token via init function"}),"\n",(0,s.jsx)(t.p,{children:"To fetch the chat history, pass the ymAuthentication token in the below init function:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"    window.YellowMessengerPlugin.init({\n\t\tymAuthenticationToken: 'Your_Unique_token'\n\t});\n\n"})}),"\n",(0,s.jsx)(t.h3,{id:"13-pass-ymauthentication-token-for-pwa-bot",children:"1.3 Pass ymAuthentication token for PWA bot"}),"\n",(0,s.jsx)(t.p,{children:"You can fetch the user's chat history from a PWA bot by passing the ymAuthentication token."}),"\n",(0,s.jsx)(t.p,{children:"To pass the ymAuthentication token for a PWA bot, follow these steps:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Use this ",(0,s.jsx)(t.code,{children:"https://cloud.yellow.ai/pwa/v2/live/x1657623696077"})," URL."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["In the address bar, append ",(0,s.jsx)(t.code,{children:"?ymAuthenticationToken=12345"}),".\nFor example, ",(0,s.jsx)(t.code,{children:"https://cloud.yellow.ai/pwa/v2/live/x1657623696077?ymAuthenticationToken=12345"})]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://i.imgur.com/74H5PE5.png",alt:""})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Refresh the page to view the chat history."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://i.imgur.com/dvkn3bQ.png",alt:""})}),"\n"]}),"\n"]})]})}function d(n={}){const{wrapper:t}={...(0,o.R)(),...n.components};return t?(0,s.jsx)(t,{...n,children:(0,s.jsx)(l,{...n})}):l(n)}}}]);