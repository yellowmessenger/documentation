"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[5109],{603905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return m}});var n=a(667294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),d=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(a),h=o,m=p["".concat(l,".").concat(h)]||p[h]||u[h]||r;return a?n.createElement(m,i(i({ref:t},c),{},{components:a})):n.createElement(m,i({ref:t},c))}));function m(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:o,i[1]=s;for(var d=2;d<r;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},575144:function(e,t,a){a.r(t),a.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return s},metadata:function(){return d},toc:function(){return p}});var n=a(487462),o=a(263366),r=(a(667294),a(603905)),i=["components"],s={title:"Function use cases",sidebar_label:"Function use cases"},l=void 0,d={unversionedId:"cookbooks/studio/usecases-functions",id:"cookbooks/studio/usecases-functions",title:"Function use cases",description:"---",source:"@site/docs/cookbooks/studio/usecases-functions.md",sourceDirName:"cookbooks/studio",slug:"/cookbooks/studio/usecases-functions",permalink:"/docs/cookbooks/studio/usecases-functions",draft:!1,tags:[],version:"current",frontMatter:{title:"Function use cases",sidebar_label:"Function use cases"},sidebar:"cookbooks",previous:{title:"Trigger a specific bot flow",permalink:"/docs/cookbooks/studio/trigger-bot"},next:{title:"Capture events when a ticket is assigned",permalink:"/docs/cookbooks/studio/ticket-assignedevent"}},c={},p=[{value:"1. Display weather information in a carousel node",id:"1-display-weather-information-in-a-carousel-node",level:2},{value:"Objective",id:"objective",level:3},{value:"Steps to implement",id:"steps-to-implement",level:3},{value:"1.1. Add the weather API",id:"11-add-the-weather-api",level:4},{value:"1.2. Create a flow and add the API node",id:"12-create-a-flow-and-add-the-api-node",level:4},{value:"1.3. Store the API response",id:"13-store-the-api-response",level:4},{value:"1.4. Write a function to format the response",id:"14-write-a-function-to-format-the-response",level:4},{value:"1.5. Include a function node",id:"15-include-a-function-node",level:3},{value:"1.6. Populate the Carousel Node",id:"16-populate-the-carousel-node",level:3},{value:"2. Calculate a date 45 days before today",id:"2-calculate-a-date-45-days-before-today",level:2},{value:"Objective",id:"objective-1",level:3},{value:"Steps to implement",id:"steps-to-implement-1",level:3},{value:"2.1. Create a flow and define a variable node",id:"21-create-a-flow-and-define-a-variable-node",level:4},{value:"2.2. Display the captured date",id:"22-display-the-captured-date",level:4},{value:"2.3. Write a function to calculate the new date",id:"23-write-a-function-to-calculate-the-new-date",level:4},{value:"2.4. Display the computed date",id:"24-display-the-computed-date",level:4},{value:"Example output",id:"example-output",level:3},{value:"3. Code snippet for sentence autocompletion",id:"3-code-snippet-for-sentence-autocompletion",level:2},{value:"4. Code snippet for BASE64 decoding",id:"4-code-snippet-for-base64-decoding",level:2}],u={toc:p};function h(e){var t=e.components,a=(0,o.Z)(e,i);return(0,r.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("hr",null),(0,r.kt)("p",null,"This guide introduces you to different ways of using ",(0,r.kt)("strong",{parentName:"p"},"Functions")," in ",(0,r.kt)("strong",{parentName:"p"},"Automation"),". It shows you how to automate tasks within your bot in a simple and easy way. By exploring practical examples and clear explanations, you'll learn how to use Functions to streamline your bot\u2019s capabilities."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"1-display-weather-information-in-a-carousel-node"},"1. Display weather information in a carousel node"),(0,r.kt)("h3",{id:"objective"},"Objective"),(0,r.kt)("p",null,"Show real-time weather data within a carousel format in your bot interface."),(0,r.kt)("h3",{id:"steps-to-implement"},"Steps to implement"),(0,r.kt)("h4",{id:"11-add-the-weather-api"},"1.1. Add the weather API"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/api/add-api#1-add-a-new-api-using-url"},"Add the Weather API")," to your bot platform to enable it to retrieve weather information."),(0,r.kt)("h4",{id:"12-create-a-flow-and-add-the-api-node"},"1.2. Create a flow and add the API node"),(0,r.kt)("p",null,"Next, ",(0,r.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/Flows/journeys#2-create-a-flow"},"create a flow")," and insert an ",(0,r.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/action-nodes#21-api"},"API node"),". Use this node to call the Weather API and fetch real-time data."),(0,r.kt)("img",{src:"https://i.imgur.com/Jklf0Ia.png",width:"80%"}),(0,r.kt)("h4",{id:"13-store-the-api-response"},"1.3. Store the API response"),(0,r.kt)("p",null,"Store the API response in an object variable so that you can extract required information easily using functions."),(0,r.kt)("img",{src:"https://i.imgur.com/dKN4rrr.png",width:"80%"}),(0,r.kt)("h4",{id:"14-write-a-function-to-format-the-response"},"1.4. Write a function to format the response"),(0,r.kt)("p",null,"Navigate to the ",(0,r.kt)("strong",{parentName:"p"},"Functions")," section and write a function to process the saved API response. Ensure that the response is formatted to match the dynamic structure required for a carousel display. For more details on dynaamic carousel formatting, refer ",(0,r.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/message-nodes#4-carousel"},"here"),"."),(0,r.kt)("img",{src:"https://i.imgur.com/Jklf0Ia.png",width:"80%"}),(0,r.kt)("h3",{id:"15-include-a-function-node"},"1.5. Include a function node"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Add a ",(0,r.kt)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/action-nodes#24-function"},"Function Node")," in the flow."),(0,r.kt)("li",{parentName:"ol"},"Choose the function you created."),(0,r.kt)("li",{parentName:"ol"},"Store the response in your preferred variable and mention its datatype  (e.g., object, string, etc.) for clarity.")),(0,r.kt)("img",{src:"https://i.imgur.com/PQhxMKE.png",width:"80%"}),(0,r.kt)("h3",{id:"16-populate-the-carousel-node"},"1.6. Populate the Carousel Node"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Insert a ",(0,r.kt)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/message-nodes1/message-nodes"},"Carousel Node")," in the flow. "),(0,r.kt)("li",{parentName:"ol"},"In the ",(0,r.kt)("strong",{parentName:"li"},"Fetch from")," field, select the variable with the formatted weather data."),(0,r.kt)("li",{parentName:"ol"},"Display the data in the carousel format.")),(0,r.kt)("img",{src:"https://i.imgur.com/Mlh4Xzv.png",width:"80%"}),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"Alternate Method"),": You can directly pass the function into the ",(0,r.kt)("strong",{parentName:"p"},"Parse API response")," field if you prefer not to use the Function Node."),(0,r.kt)("img",{src:"https://i.imgur.com/eIReCNg.png",width:"80%"})),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"2-calculate-a-date-45-days-before-today"},"2. Calculate a date 45 days before today"),(0,r.kt)("h3",{id:"objective-1"},"Objective"),(0,r.kt)("p",null,"Compute a date that is 45 days before the current date and display it in the bot."),(0,r.kt)("h3",{id:"steps-to-implement-1"},"Steps to implement"),(0,r.kt)("h4",{id:"21-create-a-flow-and-define-a-variable-node"},"2.1. Create a flow and define a variable node"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/Flows/journeys#2-create-a-flow"},"Create a new flow")," and add a ",(0,r.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/action-nodes#22-variables"},"variable node"),". Define a variable - ",(0,r.kt)("strong",{parentName:"p"},"bookingDate")," and assign it the value ",(0,r.kt)("inlineCode",{parentName:"p"},"{{{date.timestamp}}}")," , which captures the current date and time."),(0,r.kt)("img",{src:"https://i.imgur.com/e2JnHnf.png",width:"80%"}),(0,r.kt)("h4",{id:"22-display-the-captured-date"},"2.2. Display the captured date"),(0,r.kt)("p",null,"Insert a ",(0,r.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/message-nodes1/message-nodes"},"Text Node")," and display the ",(0,r.kt)("strong",{parentName:"p"},"bookingDate")," value to verify that the current date has been captured correctly."),(0,r.kt)("img",{src:"https://i.imgur.com/aQMaaUM.png",width:"80%"}),(0,r.kt)("h4",{id:"23-write-a-function-to-calculate-the-new-date"},"2.3. Write a function to calculate the new date"),(0,r.kt)("p",null,"Now, create a function that processes the timestamp and subtracts 45 days from the current date."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'return new Promise(resolve => {\n    // Retrieve the current booking date from the variables\n    let bookingDate = data.variables.bookingDate;\n\n    // Convert the booking date string into a Date object\n    let dt = new Date(bookingDate);\n\n    // Subtract 45 days from the current date\n    dt.setDate(dt.getDate() - 45);\n\n    // Format the new date to a localized string\n    let pdate = dt.toLocaleString();\n\n    // Split the formatted date string to isolate the date components\n    const myArraydate = pdate.split(",");\n\n    // Further split the date component to extract day, month, and year\n    const myArray = myArraydate[0].split("/");\n\n    // Construct a new date string in the desired format (MM/DD/YYYY)\n    let newDate = myArray[1] + "/" + myArray[0] + "/" + myArray[2];\n\n    // Update the bookingDate variable with the newly formatted date\n    data.variables.bookingDate = newDate;\n\n    // Resolve the promise with the new date string\n    resolve(newDate);\n});\n')),(0,r.kt)("h4",{id:"24-display-the-computed-date"},"2.4. Display the computed date"),(0,r.kt)("p",null,"Insert another ",(0,r.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/message-nodes1/message-nodes"},"Text Node")," to display the date that was calculated (45 days before the current date). Use the variable containing the new date."),(0,r.kt)("img",{src:"https://i.imgur.com/2cCX1By.png",width:"80%"}),(0,r.kt)("h3",{id:"example-output"},"Example output"),(0,r.kt)("p",null,"Once the flow runs, the bot will display the result to the user like this:"),(0,r.kt)("img",{src:"https://i.imgur.com/fioBFmp.png",width:"75%"}),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"3-code-snippet-for-sentence-autocompletion"},"3. Code snippet for sentence autocompletion"),(0,r.kt)("p",null,"This code helps your bot suggest sentence completions based on user input. When the user starts typing, the bot looks for matches within its existing data and provides suggestions."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'return new Promise(resolve => {\n    console.log("inside autoSuggestion");\n    let result = data.variables.autoComponents;\n    const { term } = data;\n    let suggestions = [];\n    result.forEach((hit) => {\n        if (hit.component.toLowerCase().includes(term.toLowerCase())) {\n            suggestions.push([hit.component, hit.component]);\n        }\n    });\n    resolve(suggestions);\n});\n')),(0,r.kt)("h2",{id:"4-code-snippet-for-base64-decoding"},"4. Code snippet for BASE64 decoding"),(0,r.kt)("p",null,"Base64 encoding represents data using 64 ASCII characters. When an encrypted string is received via an API, we decrypt it to obtain the original object. After decoding, the file can be uploaded to a server, such as Yellow's server. Here's an example that demonstrates decoding, uploading, and sharing the file URL."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// Execute an API call and wait for the response\nlet call_api = await app.executeApi('api_name', { argument: _value });\n\n// Parse the JSON response from the API call\nlet api_data = JSON.parse(call_api.body);\n\n// Log the API data for debugging or tracking purposes\napp.log(api_data, \"#####API DATA\");\n\n// Decode the base64-encoded file from the API response\nlet buffer = new Buffer.from(api_data.obj_name, \"base64\");\n\n// Upload the decoded file to the Yellow.ai server and get the file URL\nlet file_url = await app.uploadFile(buffer, 'File.pdf'); // 'File.pdf' is the name of the uploaded file\n\n// Optional: Uncomment the line below to send the file as a document to the user\n// await app.sendDocument(file_url, { caption: \"FILE\", filename: 'File.pdf', mime: 'application/pdf' });\n\n// Create and send a card with a download link for the uploaded file\nawait app.sendCards([\n    {\n        title: \"Kindly download the same as PDF\", // Title of the card\n        actions: [{\n            title: \"DOWNLOAD\", // Action button title\n            url: file_url // URL for downloading the file\n        }]\n    }\n]);\n")))}h.isMDXComponent=!0}}]);