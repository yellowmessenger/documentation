"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[17656],{603905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var a=n(667294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),u=c(n),m=o,h=u["".concat(s,".").concat(m)]||u[m]||d[m]||i;return n?a.createElement(h,l(l({ref:t},p),{},{components:n})):a.createElement(h,l({ref:t},p))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,l=new Array(i);l[0]=m;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r[u]="string"==typeof e?e:o,l[1]=r;for(var c=2;c<i;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},267737:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return r},metadata:function(){return c},toc:function(){return u}});var a=n(487462),o=n(263366),i=(n(667294),n(603905)),l=["components"],r={title:"react-native Chatbot SDK",sidebar_label:"React Native"},s=void 0,c={unversionedId:"platform_concepts/mobile/chatbot/react-native",id:"platform_concepts/mobile/chatbot/react-native",title:"react-native Chatbot SDK",description:"Installation",source:"@site/docs/platform_concepts/mobile/chatbot/react-native.md",sourceDirName:"platform_concepts/mobile/chatbot",slug:"/platform_concepts/mobile/chatbot/react-native",permalink:"/docs/platform_concepts/mobile/chatbot/react-native",draft:!1,tags:[],version:"current",frontMatter:{title:"react-native Chatbot SDK",sidebar_label:"React Native"},sidebar:"platform_concepts",previous:{title:"iOS",permalink:"/docs/platform_concepts/mobile/chatbot/ios"},next:{title:"Mobile SDK FAQs",permalink:"/docs/platform_concepts/mobile/chatbot/sdk-faq-worflows/mobile-sdk-faq"}},p={},u=[{value:"Installation",id:"installation",level:2},{value:"npm",id:"npm",level:3},{value:"yarn",id:"yarn",level:3},{value:"Manual installation",id:"manual-installation",level:3},{value:"iOS",id:"ios",level:4},{value:"Android",id:"android",level:4},{value:"Usage",id:"usage",level:2},{value:"Set botId",id:"set-botid",level:3},{value:"YM AuthenticationToken",id:"ym-authenticationtoken",level:3},{value:"Use Secure YM Auth",id:"use-secure-ym-auth",level:3},{value:"Push Notifications",id:"push-notifications",level:3},{value:"Payload",id:"payload",level:3},{value:"Trigger journey",id:"trigger-journey",level:4},{value:"On-Premise / Region Specific deployments",id:"on-premise--region-specific-deployments",level:3},{value:"Custom loader",id:"custom-loader",level:3},{value:"V2 bot",id:"v2-bot",level:3},{value:"Speech to Text",id:"speech-to-text",level:3},{value:"Enable Speech to Text",id:"enable-speech-to-text",level:4},{value:"iOS",id:"ios-1",level:4},{value:"Mic Icon Color",id:"mic-icon-color",level:4},{value:"Mic Background Color",id:"mic-background-color",level:4},{value:"Set Mic Button Movable",id:"set-mic-button-movable",level:4},{value:"Hide Input Bar",id:"hide-input-bar",level:3},{value:"Colors",id:"colors",level:3},{value:"Status bar",id:"status-bar",level:4},{value:"Close button",id:"close-button",level:4},{value:"Theme setup",id:"theme-setup",level:3},{value:"Set bot name",id:"set-bot-name",level:4},{value:"Set bot description",id:"set-bot-description",level:4},{value:"Set bot primary color",id:"set-bot-primary-color",level:4},{value:"Set bot secondary color",id:"set-bot-secondary-color",level:4},{value:"Set bot bubble background color",id:"set-bot-bubble-background-color",level:4},{value:"Set link color",id:"set-link-color",level:4},{value:"Set bot icon",id:"set-bot-icon",level:4},{value:"Set bot click icon",id:"set-bot-click-icon",level:4},{value:"Present chatbot",id:"present-chatbot",level:2},{value:"Bot Events",id:"bot-events",level:2},{value:"Bot close event",id:"bot-close-event",level:4},{value:"Disabling external link navigation",id:"disabling-external-link-navigation",level:2},{value:"Close bot",id:"close-bot",level:2},{value:"Reload bot",id:"reload-bot",level:2},{value:"Register Device",id:"register-device",level:2},{value:"Unlink Device Token",id:"unlink-device-token",level:2},{value:"Unread Message Count",id:"unread-message-count",level:2},{value:"Revalidate Token",id:"revalidate-token",level:2},{value:"Send Event To Bot",id:"send-event-to-bot",level:2},{value:"Demo App",id:"demo-app",level:2}],d={toc:u};function m(e){var t=e.components,n=(0,o.Z)(e,l);return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"installation"},"Installation"),(0,i.kt)("h3",{id:"npm"},"npm"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"$ npm install ymchat-react-native --save\n\n$ react-native link ymchat-react-native\n")),(0,i.kt)("h3",{id:"yarn"},"yarn"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"yarn add ymchat-react-native\n")),(0,i.kt)("h3",{id:"manual-installation"},"Manual installation"),(0,i.kt)("h4",{id:"ios"},"iOS"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"In XCode, in the project navigator, right click ",(0,i.kt)("inlineCode",{parentName:"li"},"Libraries")," \u279c ",(0,i.kt)("inlineCode",{parentName:"li"},"Add Files to [your project's name]")),(0,i.kt)("li",{parentName:"ol"},"Go to ",(0,i.kt)("inlineCode",{parentName:"li"},"node_modules")," \u279c ",(0,i.kt)("inlineCode",{parentName:"li"},"ymchat-react-native")," and add ",(0,i.kt)("inlineCode",{parentName:"li"},"YMChat.xcodeproj")),(0,i.kt)("li",{parentName:"ol"},"In XCode, in the project navigator, select your project. Add ",(0,i.kt)("inlineCode",{parentName:"li"},"libYMChat.a")," to your project's ",(0,i.kt)("inlineCode",{parentName:"li"},"Build Phases")," \u279c ",(0,i.kt)("inlineCode",{parentName:"li"},"Link Binary With Libraries")),(0,i.kt)("li",{parentName:"ol"},"Run your project (",(0,i.kt)("inlineCode",{parentName:"li"},"Cmd+R"),")<")),(0,i.kt)("h4",{id:"android"},"Android"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Open up ",(0,i.kt)("inlineCode",{parentName:"li"},"android/app/src/main/java/[...]/MainActivity.java"))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Add ",(0,i.kt)("inlineCode",{parentName:"li"},"import com.reactlibrary.YMChatPackage;")," to the imports at the top of the file"),(0,i.kt)("li",{parentName:"ul"},"Add ",(0,i.kt)("inlineCode",{parentName:"li"},"new YMChatPackage()")," to the list returned by the ",(0,i.kt)("inlineCode",{parentName:"li"},"getPackages()")," method")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Append the following lines to ",(0,i.kt)("inlineCode",{parentName:"li"},"android/settings.gradle"),":",(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"include ':ymchat-react-native'\nproject(':ymchat-react-native').projectDir = new File(rootProject.projectDir,   '../node_modules/ymchat-react-native/android')\n"))),(0,i.kt)("li",{parentName:"ol"},"Insert the following lines inside the dependencies block in ",(0,i.kt)("inlineCode",{parentName:"li"},"android/app/build.gradle"),":",(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"  compile project(':ymchat-react-native')\n")))),(0,i.kt)("h2",{id:"usage"},"Usage"),(0,i.kt)("p",null,"Import YMChat in App.js"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'import { YMChat } from "ymchat-react-native";\n')),(0,i.kt)("h3",{id:"set-botid"},"Set botId"),(0,i.kt)("p",null,"This is the first and ",(0,i.kt)("strong",{parentName:"p"},"compulsary")," step."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'YMChat.setBotId("x1234567890");\n')),(0,i.kt)("h3",{id:"ym-authenticationtoken"},"YM AuthenticationToken"),(0,i.kt)("p",null,"ymAuthenticationToken is used to associate an identity of the user with the chat bot."),(0,i.kt)("p",null,"Whenever chatbot is launched with ymAuthenticationToken it will load the previous chats associated with this user since ",(0,i.kt)("strong",{parentName:"p"},"inception"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'YMChat.setAuthenticationToken("token");\n')),(0,i.kt)("p",null,"Note: History will load only when ",(0,i.kt)("inlineCode",{parentName:"p"},"Show history")," flag is enabled in the channel settings"),(0,i.kt)("h3",{id:"use-secure-ym-auth"},"Use Secure YM Auth"),(0,i.kt)("p",null,"You can pass ",(0,i.kt)("inlineCode",{parentName:"p"},"useSecureYmAuth")," to enable additional security to your chat history. This safeguards your chatbot from unauthorized access even if an unauthorized party tries to access the token. "),(0,i.kt)("p",null,"To enable secure YmAuth, set ",(0,i.kt)("inlineCode",{parentName:"p"},"useSecureYmAuth")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"YMChat.useSecureYmAuth(true);\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"For more detailed information on how to set up secure YMAuthentication, click ",(0,i.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/mobile/chatbot/secure-ymauth"},"here"),".")),(0,i.kt)("h3",{id:"push-notifications"},"Push Notifications"),(0,i.kt)("p",null,"YMChat supports firebase notifications. Pass your ",(0,i.kt)("inlineCode",{parentName:"p"},"FCM token")," in setDeviceToken method."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'YMChat.setDeviceToken("token");\n')),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"To ",(0,i.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/mobile/chatbot/push-notifications-sdks"},"set up push notifications"),", a Firebase service account JSON file is required. You need to map the service account JSON file against your bot ID. For detailed instructions on obtaining and using the Firebase service account JSON file, please refer to the link provided ",(0,i.kt)("a",{parentName:"p",href:"https://developers.google.com/assistant/engagement/notifications#get_a_service_account_key"},"here"),".")),(0,i.kt)("h3",{id:"payload"},"Payload"),(0,i.kt)("p",null,"Additional information can be passed in the form of key value pair from app to bot using payload."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'YMChat.setPayload({ name: "Integration", type: "react-native" });\n')),(0,i.kt)("p",null,"Payload can be used to pass information from host app to bot. The payload dictionary should be JSON compatible else an error will be thrown"),(0,i.kt)("p",null,"For passing data from bot to app refer bot ",(0,i.kt)("a",{parentName:"p",href:"#bot-events"},"Bot Events")),(0,i.kt)("admonition",{title:"payload security",type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Payload is securely passed in HTTPS post request to protect the information passed in it")),(0,i.kt)("h4",{id:"trigger-journey"},"Trigger journey"),(0,i.kt)("p",null,"A specific journey can be triggered on launch, by passing the slug in the payload."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'YmChat.setPayload({ JourneySlug: "checkout-cart" });\n')),(0,i.kt)("h3",{id:"on-premise--region-specific-deployments"},"On-Premise / Region Specific deployments"),(0,i.kt)("p",null,"ymchat-react-native supports bots with on-prem deployments. For the bot to work, pass the on-prem URL to ",(0,i.kt)("inlineCode",{parentName:"p"},"setCustomURL()")," method."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'YMChat.setCustomURL("https://your-on-prem-url.com");\n')),(0,i.kt)("p",null,"If the bot is deployed in a specific region(e.g. r1,r2,r3..rn)) on yellow.ai cloud, set the ",(0,i.kt)("inlineCode",{parentName:"p"},"customBaseUrl")," as follows"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'YMChat.setCustomURL("https://rx.cloud.yellow.ai");\n')),(0,i.kt)("p",null,"Here rx = r1,r2,r3,r4,r5 etc"),(0,i.kt)("h3",{id:"custom-loader"},"Custom loader"),(0,i.kt)("p",null,"You can customize the loading image while bot loads. Just pass the URL in the following way. It is recommended to use jpg, png, svg or gif"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'YMChat.setCustomLoaderUrl("https://example.com/your/custom/image.gif");\n')),(0,i.kt)("h3",{id:"v2-bot"},"V2 bot"),(0,i.kt)("p",null,"You can enable V2 bot by calling ",(0,i.kt)("inlineCode",{parentName:"p"},"setVersion()")," method. Default value is 1"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"YMChat.setVersion(2);\n")),(0,i.kt)("h3",{id:"speech-to-text"},"Speech to Text"),(0,i.kt)("h4",{id:"enable-speech-to-text"},"Enable Speech to Text"),(0,i.kt)("p",null,"Speech to text can be enabled and disabled by calling setEnableSpeech(). Default value is ",(0,i.kt)("inlineCode",{parentName:"p"},"false")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"YMChat.setEnableSpeech(true);\n")),(0,i.kt)("h4",{id:"ios-1"},"iOS"),(0,i.kt)("p",null,"If you are supporting Speech recognization, add following snippet to Info.plist of the host app"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<key>NSMicrophoneUsageDescription</key>\n<string>Your microphone will be used to record your speech when you use the Voice feature.</string>\n<key>NSSpeechRecognitionUsageDescription</key>\n<string>Speech recognition will be used to determine which words you speak into this device&apos;s microphone.</string>\n")),(0,i.kt)("h4",{id:"mic-icon-color"},"Mic Icon Color"),(0,i.kt)("p",null,"You can change the mic button icon color using the ",(0,i.kt)("inlineCode",{parentName:"p"},"setMicIconColor")," function:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'YMChat.setMicIconColor("#000000");\n')),(0,i.kt)("h4",{id:"mic-background-color"},"Mic Background Color"),(0,i.kt)("p",null,"To change the background color of the mic button, use the ",(0,i.kt)("inlineCode",{parentName:"p"},"setMicBackgroundColor")," function:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'YMChat.setMicBackgroundColor("#0000FF");\n')),(0,i.kt)("h4",{id:"set-mic-button-movable"},"Set Mic Button Movable"),(0,i.kt)("p",null,"To set the mic button as movable or static, use the ",(0,i.kt)("inlineCode",{parentName:"p"},"setMicButtonMovable")," function:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"YMChat.setMicButtonMovable(true);\n")),(0,i.kt)("h3",{id:"hide-input-bar"},"Hide Input Bar"),(0,i.kt)("p",null,"You can hide the input bar while bot is loading by calling the ",(0,i.kt)("inlineCode",{parentName:"p"},"setDisableActionsOnLoad")," API . Default value is ",(0,i.kt)("inlineCode",{parentName:"p"},"false")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"YmChat.setDisableActionsOnLoad(true);\n")),(0,i.kt)("h3",{id:"colors"},"Colors"),(0,i.kt)("h4",{id:"status-bar"},"Status bar"),(0,i.kt)("p",null,"Status bar color can be set by calling ",(0,i.kt)("inlineCode",{parentName:"p"},"setStatusBarColor")," method"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'YMChat.setStatusBarColor("#FFFFFF");\n')),(0,i.kt)("h4",{id:"close-button"},"Close button"),(0,i.kt)("p",null,"Close button color can be set by calling ",(0,i.kt)("inlineCode",{parentName:"p"},"setCloseButtonColor")," method"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'YMChat.setCloseButtonColor("#000000");\n')),(0,i.kt)("h3",{id:"theme-setup"},"Theme setup"),(0,i.kt)("p",null,"You can customize the appearance of your chatbot interface by applying a theme. Using the YMConfig's theme property, you can modify various aspects of your chatbot, including its name, description, primary and secondary colors, icon, and click icon."),(0,i.kt)("h4",{id:"set-bot-name"},"Set bot name"),(0,i.kt)("p",null,"Define your bot's name using ",(0,i.kt)("inlineCode",{parentName:"p"},"setThemeBotName")," method."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"YMChat.setThemeBotName('Demo Bot Name');\n")),(0,i.kt)("h4",{id:"set-bot-description"},"Set bot description"),(0,i.kt)("p",null,"Provide a description for your bot using ",(0,i.kt)("inlineCode",{parentName:"p"},"setThemeBotDescription")," method."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"YMChat.setThemeBotDescription('Demo Bot Description');\n")),(0,i.kt)("h4",{id:"set-bot-primary-color"},"Set bot primary color"),(0,i.kt)("p",null,"Customize the primary color of your bot using ",(0,i.kt)("inlineCode",{parentName:"p"},"setThemePrimaryColor")," method."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"YMChat.setThemePrimaryColor('#000000');\n")),(0,i.kt)("h4",{id:"set-bot-secondary-color"},"Set bot secondary color"),(0,i.kt)("p",null,"Define the secondary color of your bot using ",(0,i.kt)("inlineCode",{parentName:"p"},"setThemeSecondaryColor")," method."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"YMChat.setThemeSecondaryColor('#ffffff');\n")),(0,i.kt)("h4",{id:"set-bot-bubble-background-color"},"Set bot bubble background color"),(0,i.kt)("p",null,"Customize the background color of your bot bubble or message using ",(0,i.kt)("inlineCode",{parentName:"p"},"setThemeBotBubbleBackgroundColor")," method."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"YMChat.setThemeBotBubbleBackgroundColor('#0000ff');\n")),(0,i.kt)("h4",{id:"set-link-color"},"Set link color"),(0,i.kt)("p",null,"Customize the link color in messages using ",(0,i.kt)("inlineCode",{parentName:"p"},"setThemeLinkColor")," method."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'YMChat.setThemeLinkColor("#FF0000");\n')),(0,i.kt)("h4",{id:"set-bot-icon"},"Set bot icon"),(0,i.kt)("p",null,"Choose an icon to represent your bot using ",(0,i.kt)("inlineCode",{parentName:"p"},"setThemeBotIcon")," method."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"YMChat.setThemeBotIcon('https://cdn.yellowmessenger.com/XJFcMhLpN6L91684914460598.png');\n")),(0,i.kt)("h4",{id:"set-bot-click-icon"},"Set bot click icon"),(0,i.kt)("p",null,"Define an icon for the minimized state of your bot using ",(0,i.kt)("inlineCode",{parentName:"p"},"setThemeBotClickIcon")," method."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"YMChat.setThemeBotClickIcon('https://cdn.yellowmessenger.com/XJFcMhLpN6L91684914460598.png');\n")),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"present-chatbot"},"Present chatbot"),(0,i.kt)("p",null,"Chat bot can be presented by calling ",(0,i.kt)("inlineCode",{parentName:"p"},"startChatbot()"),". This method will display full screen chat view"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"YMChat.startChatbot();\n")),(0,i.kt)("h2",{id:"bot-events"},"Bot Events"),(0,i.kt)("p",null,"Bot events are used to pass information from bot to app. For passing events from app to bot refer ",(0,i.kt)("a",{parentName:"p",href:"#payload"},"Payload")),(0,i.kt)("p",null,"Import ",(0,i.kt)("inlineCode",{parentName:"p"},"YMChatEvents")," from ",(0,i.kt)("inlineCode",{parentName:"p"},"ymchat-react-native")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"import { YMChat, YMChatEvents } from 'ymchat-react-native';\n..\n..\nYMChatEvents.addListener('YMChatEvent', (event) => {\n   console.log(event.code, event.data); // you get access to all incoming bot events.\n});\n")),(0,i.kt)("h4",{id:"bot-close-event"},"Bot close event"),(0,i.kt)("p",null,"Bot close event is separetly sent and it can be handled in following way."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"import { YMChat, YMChatEvents } from 'ymchat-react-native';\n..\n..\nYMChatEvents.addListener('YMBotCloseEvent', () => {\n   console.log(\"Bot closed\");\n});\n\n")),(0,i.kt)("h2",{id:"disabling-external-link-navigation"},"Disabling external link navigation"),(0,i.kt)("p",null,"To prevent url opening in the external browser, use ",(0,i.kt)("inlineCode",{parentName:"p"},"shouldOpenLinkExternally")," method with false parameter and listen to ",(0,i.kt)("inlineCode",{parentName:"p"},"url-clicked")," event in ",(0,i.kt)("inlineCode",{parentName:"p"},"YMChatEvent")," listner to get the url of the link clicked."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"YMChat.setOpenLinkExternally(false);\n")),(0,i.kt)("h2",{id:"close-bot"},"Close bot"),(0,i.kt)("p",null,"Bot can be programatically closed using ",(0,i.kt)("inlineCode",{parentName:"p"},"closeBot()")," function"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"YMChat.closeBot();\n")),(0,i.kt)("h2",{id:"reload-bot"},"Reload bot"),(0,i.kt)("p",null,"To reload the bot with the same configuration, use the ",(0,i.kt)("inlineCode",{parentName:"p"},"reloadBot()")," function. This will reload the bot without closing and reopening it."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"YMChat.reloadBot();\n")),(0,i.kt)("h2",{id:"register-device"},"Register Device"),(0,i.kt)("p",null,"If you want to receive push notifications without or before launching the bot, you can register your device.\nTo use this api ",(0,i.kt)("inlineCode",{parentName:"p"},"apiKey"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"botId"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"deviceToken")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"ymAuthenticationToken")," are mandatory parameters."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'YMChat.setBotId("botId");\nYMChat.setAuthenticationToken("authToken");\nYMChat.setDeviceToken("deviceToken");\n    \nYMChat.registerDevice(\n  apiKey,\n  () => {\n    console.log("Device token linked successfully");\n  },\n  (error) => {\n    console.log(`error ${error.message}`);\n  }\n);\n')),(0,i.kt)("h2",{id:"unlink-device-token"},"Unlink Device Token"),(0,i.kt)("p",null,"If you want to stop receiving push notifications you can unlink the device.\nTo use this api ",(0,i.kt)("inlineCode",{parentName:"p"},"apiKey"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"botId")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"deviceToken")," are mandatory parameters.\nDevice token typically is unlinked when the user logs out of the app."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'YMChat.unlinkDeviceToken(\n  botId,\n  apiKey,\n  deviceToken,\n  (unLinkDeviceTokenResult) => {\n    if (unLinkDeviceTokenResult == true) {\n      console.log("Device token unlinked");\n    } else {\n      console.log(unLinkDeviceTokenResult);\n    }\n  }\n);\n')),(0,i.kt)("admonition",{title:"API Key",type:"note"},(0,i.kt)("p",{parentName:"admonition"},"API key can be generated/found by visiting ",(0,i.kt)("inlineCode",{parentName:"p"},"https://cloud.yellow.ai")," -> Overview -> Configure -> API Key section")),(0,i.kt)("h2",{id:"unread-message-count"},"Unread Message Count"),(0,i.kt)("p",null,"If you want to show an indicator in your app if there is any unread messages, you can achieve that by calling the given api when bot is in closed state.\nPre condition to use this api is that customer must have opened the bot at least once with ",(0,i.kt)("inlineCode",{parentName:"p"},"ymAuthenticationToken")," otherwise you will receive an error message.\nTo use this api ",(0,i.kt)("inlineCode",{parentName:"p"},"botId")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"ymAuthenticationToken")," are mandatory parameters."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'YMChat.setBotId("botId");\nYMChat.setAuthenticationToken("authToken");\n    \nYMChat.getUnreadMessagesCount(\n  (count) => {\n    console.log(`Unread Message Count: ${count}`);\n  },\n  (error) => {\n    console.log(`error ${error.message}`);\n  }\n);\n')),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"revalidate-token"},"Revalidate Token"),(0,i.kt)("p",null,"When your authentication token expires, you can use revalidate token to generate a new token."),(0,i.kt)("p",null,"Once your secure YMAuth is enabled, whenever your authentication token expires, the server will automatically initiate a request to get a fresh token from Yellow."),(0,i.kt)("p",null,"When you are using the ",(0,i.kt)("inlineCode",{parentName:"p"},"ym-revalidate-token")," event, your application must include both the ",(0,i.kt)("inlineCode",{parentName:"p"},"apiToken")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"refreshSession")," as mandatory parameters. This ensures a seamless and secure revalidation process."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'YMChat.setBotId("botId");\nYMChat.setAuthenticationToken("authToken");\n\nYMChat.revalidateToken("new token", refreshSession);\n')),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"For more detailed information on how to set up secure YMAuthentication, click ",(0,i.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/mobile/chatbot/secure-ymauth"},"here"),".")),(0,i.kt)("h2",{id:"send-event-to-bot"},"Send Event To Bot"),(0,i.kt)("p",null,"If you intend to transmit data back to the bot after it has been successfully launched and is in a running state, you can make use of this API."),(0,i.kt)("p",null,"To use this api ",(0,i.kt)("inlineCode",{parentName:"p"},"code")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"data")," are mandatory parameter."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"YMChat.sendEventToBot('code', { some-key: \"some-value\" });\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"For more detailed information on how to send event to bot workflow, click ",(0,i.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/mobile/chatbot/send-event-workflow"},"here"),".")),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"demo-app"},"Demo App"),(0,i.kt)("p",null,"A demo app can be used as a reference to better understand how this SDK can be integrated in the app\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/yellowmessenger/ymchat-react-native-demo"},"https://github.com/yellowmessenger/ymchat-react-native-demo")),(0,i.kt)("p",null,"For more info feel free to email us at ",(0,i.kt)("a",{parentName:"p",href:"mailto:apps@yellow.ai"},"apps@yellow.ai")))}m.isMDXComponent=!0}}]);