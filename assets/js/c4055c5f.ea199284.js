"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[39078],{13690:(e,s,o)=>{o.r(s),o.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"cookbooks/studio/storeApiResponse","title":"Functions & API related use cases","description":"How to store API response values as objects in your bot","source":"@site/docs/cookbooks/studio/storeApiResponse.md","sourceDirName":"cookbooks/studio","slug":"/cookbooks/studio/storeApiResponse","permalink":"/docs/cookbooks/studio/storeApiResponse","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"sidebar_label":"Function & APIs related use cases","title":"Functions & API related use cases"},"sidebar":"cookbooks","previous":{"title":"Display images for different languages","permalink":"/docs/cookbooks/studio/images-languages"},"next":{"title":"Trigger flow via Qr options","permalink":"/docs/cookbooks/studio/qr-node"}}');var t=o(74848),r=o(28453);const i={sidebar_label:"Function & APIs related use cases",title:"Functions & API related use cases"},a="Store API response in a variable",c={},l=[{value:"How to store API response values as objects in your bot",id:"how-to-store-api-response-values-as-objects-in-your-bot",level:2},{value:"What is an API response?",id:"what-is-an-api-response",level:2},{value:"Steps to store API response",id:"steps-to-store-api-response",level:2},{value:"Step 1: Define the response object",id:"step-1-define-the-response-object",level:3},{value:"Explanation:",id:"explanation",level:3},{value:"Step 2: Access values from the Object",id:"step-2-access-values-from-the-object",level:2},{value:"Explanation:",id:"explanation-1",level:3},{value:"Purpose:",id:"purpose",level:4},{value:"Components:",id:"components",level:4},{value:"Accessing variables",id:"accessing-variables",level:3}];function d(e){const s={admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"store-api-response-in-a-variable",children:"Store API response in a variable"})}),"\n",(0,t.jsx)(s.h2,{id:"how-to-store-api-response-values-as-objects-in-your-bot",children:"How to store API response values as objects in your bot"}),"\n",(0,t.jsxs)(s.p,{children:["In this tutorial, you will learn how to store all the values from an ",(0,t.jsx)(s.strong,{children:"API"})," (Application Programming Interface) response as an object. This allows you to use the data effectively across different nodes of your bot. By following the steps mentioned below, you can easily manage and utilize API data throughout your bot\u2019s features."]}),"\n",(0,t.jsx)(s.h2,{id:"what-is-an-api-response",children:"What is an API response?"}),"\n",(0,t.jsx)(s.p,{children:"An API response is the data that you receive from an API when you request information. This data can include various details, like names, addresses, and other relevant information. Storing this response as an object helps you access the data easily."}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"steps-to-store-api-response",children:"Steps to store API response"}),"\n",(0,t.jsx)(s.h3,{id:"step-1-define-the-response-object",children:"Step 1: Define the response object"}),"\n",(0,t.jsx)(s.p,{children:"You will begin by defining what the response from the API looks like. This is done by creating a response object. Consider the code provided below:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-javascript",children:'// Define an object to store key information about a school\nconst response = {\n  "school": "School Name",      // Name of the school (string)\n  "address": {                  // Address of the school (object)\n    "street": "2nd Main",       // Street address\n    "doorNo": "23/1",           // Door number\n    "city": "New Delhi"         // City of the school\n  },\n  "city": "Anytown",            // City where the school is located (string)\n  "state": "CA",                // State abbreviation (string)\n  "zip code": "91234"           // Postal code (string)\n};\n'})}),"\n",(0,t.jsx)(s.h3,{id:"explanation",children:"Explanation:"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Purpose:"}),(0,t.jsx)(s.br,{}),"\n","In the code snippet provided above, we created an object called response that holds both string values (like the school name, city, state, etc.) and a nested object (the address of the school)."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Components:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Constant variable:"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.code,{children:"const response"})," establishes a constant variable that holds the API response."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Object structure:"}),(0,t.jsx)(s.br,{}),"\n","The curly braces ",(0,t.jsx)(s.code,{children:"{ }"})," define an object, which is a way to group related information."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"key-value pairs:"}),(0,t.jsx)(s.br,{}),"\n","Each piece of information is represented as a key (like ",(0,t.jsx)(s.code,{children:'"school"'}),") paired with its corresponding value (like ",(0,t.jsx)(s.code,{children:'"School Name"'}),'). We also have an object inside another object for the "address" key. This structure allows for easy access and management of the data.']}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"step-2-access-values-from-the-object",children:"Step 2: Access values from the Object"}),"\n",(0,t.jsx)(s.p,{children:"In this step, you will learn how to access and use specific values from the API response object. The following code snippet demonstrates this process:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-javascript",children:'return new Promise(resolve => {\n    const { apiResponse } = ymLib.args;      // Extract the API response\n    let { body } = apiResponse;              // Retrieve the body of the response\n    body = JSON.parse(body);                 // Parse the body into a JavaScript object\n    console.log(body, "API response in test"); // Log the response for debugging\n\n    // Access string value (school name)\n    let { school } = body;\n\n    // Access nested object properties (address details)\n    let { address: { street, doorNo, city } } = body;  \n\n    resolve({ school, street, doorNo, city }); // Resolve the promise with the desired values\n});\n\n'})}),"\n",(0,t.jsx)(s.h3,{id:"explanation-1",children:"Explanation:"}),"\n",(0,t.jsx)(s.h4,{id:"purpose",children:"Purpose:"}),"\n",(0,t.jsx)(s.p,{children:"This code snippet retrieves and manages data from an API response. It shows how to access both string values (like the school name) and nested object properties (like address details)."}),"\n",(0,t.jsx)(s.h4,{id:"components",children:"Components:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Promise creation:"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.code,{children:"return new Promise(resolve => { ... })"})," initiates an asynchronous operation to handle the API response while the rest of your code continues executing."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"API response extraction:"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.code,{children:"const { apiResponse } = ymLib.args;"})," extracts the API response from ",(0,t.jsx)(s.code,{children:"ymLib.args"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Body retrieval and parsing:"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.code,{children:"let { body } = apiResponse;"})," retrieves the main content of the response, and ",(0,t.jsx)(s.code,{children:"body = JSON.parse(body);"})," converts it into a JavaScript object."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Accessing string value:"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.code,{children:"let { school } = body;"})," extracts the school name"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Accessing object properties:"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.code,{children:"let { address: { street, doorNo, city } } = body;"})," retrieves the street, door number, and city from the nested ",(0,t.jsx)(s.code,{children:"address"})," object."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Promise resolution:"}),(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.code,{children:"resolve({ school, street, doorNo, city });"})," resolves the promise with the extracted values for further use."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"accessing-variables",children:"Accessing variables"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"For string variables"}),": To access and display a string variable (e.g., ",(0,t.jsx)(s.code,{children:"school"}),"), use:",(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.code,{children:"{{{variables.school}}}"})]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"For object variables"}),": If the variable is an object, access its properties using dot notation. For example, to get the ",(0,t.jsx)(s.code,{children:"street"})," property from the nested ",(0,t.jsx)(s.code,{children:"address"})," object, use:",(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.code,{children:"{{{variables.school.address.street}}}"})]}),"\n"]}),"\n",(0,t.jsx)(s.admonition,{type:"note",children:(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["You can use the ",(0,t.jsx)(s.code,{children:"console.log()"})," function to check the value of the variable in the logs. This will help you to debug the issue."]}),"\n",(0,t.jsx)(s.li,{children:"If you are debugging an API call and you are not seeing the data that you expect, it is possible that the response is missing a body. In this case, you will need to parse the response body in order to access the data."}),"\n"]})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Checklist"})}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Verify API call success"}),": Make sure that the API call is successful. You can check this by inspecting the response in the developer tools."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Check variable assignment"}),": Confirm that the API response is correctly stored in the relevant variable. You can check this by inspecting the variable in the developer tools."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Ensure proper parsing"}),": If working with a response object, verify that it is parsed properly to access the desired data. You can check this by inspecting the response object in the developer tools."]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,s,o)=>{o.d(s,{R:()=>i,x:()=>a});var n=o(96540);const t={},r=n.createContext(t);function i(e){const s=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);