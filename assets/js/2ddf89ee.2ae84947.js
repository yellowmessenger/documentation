"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[28912],{603905:function(e,t,o){o.d(t,{Zo:function(){return u},kt:function(){return f}});var n=o(667294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},u=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(o),m=r,f=p["".concat(l,".").concat(m)]||p[m]||d[m]||a;return o?n.createElement(f,i(i({ref:t},u),{},{components:o})):n.createElement(f,i({ref:t},u))}));function f(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,i=new Array(a);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:r,i[1]=s;for(var c=2;c<a;c++)i[c]=o[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}m.displayName="MDXCreateElement"},508824:function(e,t,o){o.r(t),o.d(t,{assets:function(){return u},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return p}});var n=o(487462),r=o(263366),a=(o(667294),o(603905)),i=["components"],s={title:"Content Security Policy",sidebar_label:"Content Security Policy"},l=void 0,c={unversionedId:"platform_concepts/channelConfiguration/content-security-policy",id:"platform_concepts/channelConfiguration/content-security-policy",title:"Content Security Policy",description:"Content Security Policy (CSP) is a security standard implemented by web browsers to provide an additional layer of security for your website. It functions as a gatekeeper, determining who or what is permitted to access your website and significantly reduces the risk of cross-site scripting (XSS) attacks, data breaches, and other malicious activities.",source:"@site/docs/platform_concepts/channelConfiguration/content-security-policy.md",sourceDirName:"platform_concepts/channelConfiguration",slug:"/platform_concepts/channelConfiguration/content-security-policy",permalink:"/docs/platform_concepts/channelConfiguration/content-security-policy",draft:!1,tags:[],version:"current",frontMatter:{title:"Content Security Policy",sidebar_label:"Content Security Policy"},sidebar:"platform_concepts",previous:{title:"V2 migration guide",permalink:"/docs/platform_concepts/channelConfiguration/support-banner-migration"},next:{title:"Embed chat widget on SharePoint",permalink:"/docs/platform_concepts/channelConfiguration/deploy-sharepoint"}},u={},p=[{value:"Add CSP to your website",id:"add-csp-to-your-website",level:2},{value:"Add rules to your website",id:"add-rules-to-your-website",level:2},{value:"Types of resources",id:"types-of-resources",level:2},{value:"Configure CSP for Yellow.ai Chat widget",id:"configure-csp-for-yellowai-chat-widget",level:2}],d={toc:p};function m(e){var t=e.components,o=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,n.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Content Security Policy (CSP) is a security standard implemented by web browsers to provide an additional layer of security for your website. It functions as a gatekeeper, determining who or what is permitted to access your website and significantly reduces the risk of cross-site scripting (XSS) attacks, data breaches, and other malicious activities."),(0,a.kt)("p",null,"CSP allows website administrators to specify the allowable resources, such as scripts, stylesheets, and images, that can be loaded by web pages. By defining these rules, you can prevent unauthorized individuals or malicious content."),(0,a.kt)("p",null,"Consider a scenario where you have a website that allows user-generated content, like a forum or a comment section. In the absence of CSP, an attacker could inject malicious code into user comments or forum posts, posing a serious threat to user data and potentially spreading malware. However, by implementing CSP, you can specify that only scripts from trusted sources are allowed to run on your website, effectively blocking any unauthorized code from executing."),(0,a.kt)("h2",{id:"add-csp-to-your-website"},"Add CSP to your website"),(0,a.kt)("p",null,"To implement Content Security Policy (CSP) on your website, configure the Content-Security-Policy header in your server's response. This header allows you to define the rules for your website's content security policy. You can specify directives such as ",(0,a.kt)("inlineCode",{parentName:"p"},"default-src"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"script-src"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"style-src"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"img-src"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"media-src"),", and so on, to control the sources from which different types of content can be loaded."),(0,a.kt)("p",null,"For instance:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"To allow only the resources to be loaded from the same origin, or specify specific domains or trusted sources for different types of content, set ",(0,a.kt)("inlineCode",{parentName:"li"},"default-src 'self'"),"."),(0,a.kt)("li",{parentName:"ul"},"To specify a URL where violation reports should be sent, use the ",(0,a.kt)("inlineCode",{parentName:"li"},"report-uri")," directive.")),(0,a.kt)("h2",{id:"add-rules-to-your-website"},"Add rules to your website"),(0,a.kt)("p",null,"You can implement these rules on your website using the following methods:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Using Meta tag in Static HTML Webpage")),(0,a.kt)("p",{parentName:"li"},"This meta tag all resources from the current domain along with all subdomains of yellow.ai."))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'<meta\n  http-equiv="Content-Security-Policy"\n  content="default-src \'self\' https://*.yellow.ai;"\n/>;\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Using Headers in Server Configuration")," ")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"add_header Content-Security-Policy-Report-Only \"default-src 'none'; form-action 'none'; frame-ancestors 'none';\"\n")),(0,a.kt)("p",null,"If you find server configurations challenging, reach out to your infrastructure team for assistance. Alternatively, you can refer to this ",(0,a.kt)("a",{parentName:"p",href:"https://mattferderer.com/how-to-add-a-header"},"link")," for better understanding."),(0,a.kt)("h2",{id:"types-of-resources"},"Types of resources"),(0,a.kt)("p",null,"You can also specify what type of resources you would like to load from certain origins. For example, let\u2019s say you want to allow loading videos only from YouTube, images from Cloudinary, and fonts from Google fonts, and the rest of the other content only from your website. You can create a rule like this."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"add_header Content-Security-Policy-Report-Only \"default-src 'self'; media-src https://youtube.com; img-src: https://*.cloudinary.com; font-src https://*.google.com;\"\n")),(0,a.kt)("p",null,"or "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'<meta\n  http-equiv="Content-Security-Policy"\n  content="default-src \'self\'; media-src https://youtube.com; img-src: https://*.cloudinary.com; font-src https://*.google.com;"\n/>;\n')),(0,a.kt)("p",null,"In the above example:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"default-src 'self'"),": Allows resources (images, scripts, styles) to be loaded only from the same origin."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"media-src 'self' https://www.youtube.com"),": Allows media resources, such as videos, from the same origin and YouTube."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"img-src 'self' https://res.cloudinary.com"),": Allows images from the same origin and Cloudinary."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"font-src 'self' https://fonts.gstatic.com"),": Allows fonts to be loaded from both the same origin and the specified Google Fonts origin.")),(0,a.kt)("p",null,"Now that you have got a basic idea of what CSP is and how to configure on your website. Let\u2019s see how to add a CSP to ensure Yellow.ai chat widget performs as expected."),(0,a.kt)("h2",{id:"configure-csp-for-yellowai-chat-widget"},"Configure CSP for Yellow.ai Chat widget"),(0,a.kt)("p",null,"Yellow.ai's chat widget: "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Makes a socket connection with wss://cloud.yellow.ai/websocket,"),(0,a.kt)("li",{parentName:"ul"},"Fetches assets from ",(0,a.kt)("a",{parentName:"li",href:"https://cdn.yellowmessenger.com"},"https://cdn.yellowmessenger.com"),","),(0,a.kt)("li",{parentName:"ul"},"Tracks how the widget is used from ",(0,a.kt)("inlineCode",{parentName:"li"},"blob://<your_domain>"),". (a web-worker that is created on the parent website\u2019s domain)."),(0,a.kt)("li",{parentName:"ul"},"Makes API requests to ",(0,a.kt)("inlineCode",{parentName:"li"},"https://*.yellow.ai"),".")),(0,a.kt)("p",null,"So you need to create the rules as follows:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"You can add all the resources to the ",(0,a.kt)("inlineCode",{parentName:"li"},"default-src"),".")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"add_header Content-Security-Policy-Report-Only \"default-src 'self' https://*.yellow.ai https://*.yellowmessenger.com wss://*.yellow.ai blob://*.your_website.com;\"\n")),(0,a.kt)("p",null,"or"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<meta\n  http-equiv="Content-Security-Policy"\n  content="default-src \'self\' https://*.yellow.ai https://*.yellowmessenger.com wss://*.yellow.ai;"\n/>;\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Or, you can specify exactly what type of resources that you would like to allow from our domains.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"add_header Content-Security-Policy-Report-Only \"default-src 'self' 'unsafe-inline'; connect-src wss://*.yellow.ai https://*.yellow.ai; script-src https://*.yellowmessenger.com; style-src https://*.yellowmessenger.com; worker-src blob://*.your_website.com;\"\n")),(0,a.kt)("p",null,"--------- or ---------"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},"<meta\n  http-equiv=\"Content-Security-Policy\"\n  content=\"default-src 'self' 'unsafe-inline'; connect-src wss://*.yellow.ai https://*.yellow.ai; script-src https://*.yellowmessenger.com; style-src https://*.yellowmessenger.com; worker-src blob://*.your_website.com;\"\n/>;\n")),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"If you explicitly specify a rule to allow a type of resource only from these websites and Yellow\u2019s resource is not from one of those sources, the resource will be rejected."),(0,a.kt)("p",{parentName:"admonition"},"For instance, specifying ",(0,a.kt)("inlineCode",{parentName:"p"},"font-src 'self';")," restricts font loading from Yellow's CDN.  However, omitting this rule would prompt the browser to check the parent rule instead (default-src).")))}m.isMDXComponent=!0}}]);