"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[52427],{27857:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"cookbooks/insights/nativesqlquery","title":"Native queries to fetch data explorer data/columns","description":"The existing filters in the data explorer only allow filtering rows. By using SQL queries, we can filter and display the desired columns.","source":"@site/docs/cookbooks/insights/nativesqlquery.md","sourceDirName":"cookbooks/insights","slug":"/cookbooks/insights/nativesqlquery","permalink":"/docs/cookbooks/insights/nativesqlquery","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Native queries to fetch data explorer data/columns","sidebar_label":"SQL queries for tables"},"sidebar":"cookbooks","previous":{"title":"Fix data errors in database","permalink":"/docs/cookbooks/insights/fixdataerrors"},"next":{"title":"Session mertics drilldown","permalink":"/docs/cookbooks/insights/sessionmetrics"}}');var r=n(74848),o=n(28453);const i={title:"Native queries to fetch data explorer data/columns",sidebar_label:"SQL queries for tables"},l=void 0,c={},a=[];function d(e){const s={code:"code",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"The existing filters in the data explorer only allow filtering rows. By using SQL queries, we can filter and display the desired columns."}),"\n",(0,r.jsx)(s.p,{children:"Follow these steps to create a SQL query in Data explorer:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Open ",(0,r.jsx)(s.strong,{children:"Data Explorer"})," > Click ",(0,r.jsx)(s.strong,{children:"Create Report"})," > Select ",(0,r.jsx)(s.strong,{children:"Native Query"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["In ",(0,r.jsx)(s.strong,{children:"Create Report"})," section, write the queries based on your requirements."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.img,{src:"https://lh7-rt.googleusercontent.com/docsz/AD_4nXcVeB3iWz-_eVh8SelrU2BPJ7AXGqSqz-S19b3VnKp00gozZIdRzMrR2j_Wa14_u2d4hikchK1FC4qQr-H6SGKjQP4x-lwT432oN34tmyB_3ztdj-WHC652a-za3rQMVPVwN2MUmuJpxFVljwQwvG2P4oc?key=AX9O8V865aZREOersNhPyg",alt:""})})}),"\n",(0,r.jsx)(s.p,{children:"Here are some SQL queries you can use:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"To get all the columns from the messages database:"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"SELECT * FROM messages;\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.img,{src:"https://lh7-rt.googleusercontent.com/docsz/AD_4nXdkYT_U9FpPrULqYNYDTCPojqvkx5q7Uv0QG1SYj9XMhevwxyozR6iM_NMvsXZpzjfFSkUhqOajuLfI4ZXKscFdBD2lpxq0JgJiQhERtTCvdNXlKxTQItPiHq0nBWFG7vKIJOwSUbsVCDSW-HbXg1maRa6k?key=AX9O8V865aZREOersNhPyg",alt:""})})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"To get specified columns (date, UID, and session ID):"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"SELECT __time AS CreatedDate, uid AS UID, sessionId AS SessionID FROM messages;\n\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.img,{src:"https://lh7-rt.googleusercontent.com/docsz/AD_4nXeGejFtyREOg7s2RvR1RP2d770GxpFSMqW4WtsunALVxlSOxfVYjpHhKMynNRyeNYLOC1nxXzuzbvaEb8mW-BFn77RZq3iHIXp8MfAN_JV39JqrwUhPwo6f1plHHn0hxVI6pfmmSPrSeczxIoUNiDrsVmNk?key=AX9O8V865aZREOersNhPyg",alt:""})})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"To create new columns with static values (e.g., bot ID and bot name):"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:'SELECT "x1689236272568" AS BOTID, "Bhavana" AS BOTNAME, uid AS UID FROM messages;\n'})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.img,{src:"https://lh7-rt.googleusercontent.com/docsz/AD_4nXcXSx4bpmGlhRs9_wb4kdhC4lGeW9kqmo3wZCbnoOOLcg5rJzaYp6v1EjPNznXt1gqPAfkMkOjKIgz6ckAozlWB2TN31g_U-YWWl5pe5xbDm1LvvgLEU2W1Q2tjlPv7b4pu3GoIIyf00MBqcqTrHavPc1s?key=AX9O8V865aZREOersNhPyg",alt:""})})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"To get the count of each user in the database based on the UID:"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"SELECT COUNT(*) AS total_users, uid AS UID FROM messages GROUP BY uid;\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.img,{src:"https://lh7-rt.googleusercontent.com/docsz/AD_4nXcm0ab2W1U6WvT1wDILrz6hxpARcm6QnizTrU1bNbRlazD3xHcaFKO42ZqnqkK6lFcr3tjm_7XylozFLNhhQ888M1OXE0hAriYUloOodZRxaRvTJgKrAA5TUbhBwaQb72kslWtxEs2jWYeEbva32Lp3vAE?key=AX9O8V865aZREOersNhPyg",alt:""})})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"To get chat details through the messages database:"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:'SELECT __time AS CreatedDate, "x1689236272568" AS BOTID, uid AS UID, messageType AS MessageType, sessionId AS SessionID, journey AS Journey, step AS Step FROM messages;\n\n'})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.img,{src:"https://lh7-rt.googleusercontent.com/docsz/AD_4nXdLa_LXOrPCrMVoWRFYU8EAZd5zWcexpvQXhllJ8VEwUx8YLvZLGmxghL5vpFSKVVFJD-0zZyYm4OgVcpfRzBsaX-FryG56GxvLQmYIyA1sxM63a98yCc3WeNO1HFyGSWGQ38K-UQ2_81wwgTjrPwhzRLPt?key=AX9O8V865aZREOersNhPyg",alt:""})})}),"\n",(0,r.jsxs)(s.ol,{start:"3",children:["\n",(0,r.jsx)(s.li,{children:"Save the query and create dashboards to filter the data based on the timestamp for further use cases."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.img,{src:"https://lh7-rt.googleusercontent.com/docsz/AD_4nXcuttmMH7fY9zTic3vonkVSi7BHyFtx-M990MHxBztCnR__iBZ-GuSLHlCqkxF9ttUumGLtpY_JeHBndSQU4HR9sJ-hiCz2Y_f2JrUKOAXUR4fMwxlpk--tS2MFrC8xIXli2RKFnOM1-XtTUjiEFt9zUWQ?key=AX9O8V865aZREOersNhPyg",alt:""})})}),"\n",(0,r.jsxs)(s.ol,{start:"4",children:["\n",(0,r.jsxs)(s.li,{children:["Click ",(0,r.jsx)(s.strong,{children:"Create Dashboard"})," > select ",(0,r.jsx)(s.strong,{children:"New Dashboard"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.img,{src:"https://lh7-rt.googleusercontent.com/docsz/AD_4nXfX628XJNg6Ia1quD5BB8r2IUbpEOd_FbzVhbyBAWUlbv8arcuZ3JoaphQbl-YgBHHczvEFSHHcJWJyGgM3drY-MBQsJUa53TyvziREokVk6W76B8UGZ0Yva7JC_5A2rE5JMOGHK3yb57bAsniaA-JRDJY2?key=AX9O8V865aZREOersNhPyg",alt:""})})}),"\n",(0,r.jsxs)(s.ol,{start:"5",children:["\n",(0,r.jsx)(s.li,{children:"Go to Custom Dashboards to view the newly created dashboard."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.img,{src:"https://lh7-rt.googleusercontent.com/docsz/AD_4nXcAMUSmnZl-g0JZKIVVHORIHGmMZjzF7xh-w6v5fXRyIypZ5JlypAUID3XPIGfvgYpPJeKDw0ZpUVMAG8-qS_01n94mFTrYh9kvfXhqbzZEEWRI-vocOthBH3bFhJlI5xxj54TjqcNmU8lddytcdZrCyqBd?key=AX9O8V865aZREOersNhPyg",alt:""})})})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>l});var t=n(96540);const r={},o=t.createContext(r);function i(e){const s=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(o.Provider,{value:s},e.children)}}}]);