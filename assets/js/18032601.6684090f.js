"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[47930],{28453:(e,t,a)=>{a.d(t,{R:()=>s,x:()=>l});var n=a(96540);const i={},o=n.createContext(i);function s(e){const t=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),n.createElement(o.Provider,{value:t},e.children)}},92770:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>r,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"platform_concepts/channelConfiguration/chat-widget-payload","title":"Chat widget payload","description":"A payload is used to pass the information to the bot.","source":"@site/docs/platform_concepts/channelConfiguration/chat-widget-payload.md","sourceDirName":"platform_concepts/channelConfiguration","slug":"/platform_concepts/channelConfiguration/chat-widget-payload","permalink":"/docs/platform_concepts/channelConfiguration/chat-widget-payload","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Chat widget payload","sidebar_label":"Chat widget payload"},"sidebar":"platform_concepts","previous":{"title":"Set up Chat widget","permalink":"/docs/platform_concepts/channelConfiguration/web-widget"},"next":{"title":"Fetch Chat widget history","permalink":"/docs/platform_concepts/channelConfiguration/chat-history"}}');var i=a(74848),o=a(28453);const s={title:"Chat widget payload",sidebar_label:"Chat widget payload"},l=void 0,r={},c=[{value:"1. Pass values from the web client to the bot",id:"1-pass-values-from-the-web-client-to-the-bot",level:2},{value:"1.1 Pass payload data via bot script",id:"11-pass-payload-data-via-bot-script",level:3},{value:"1.2 Pass payload data via init function",id:"12-pass-payload-data-via-init-function",level:3}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"A payload is used to pass the information to the bot."}),"\n",(0,i.jsx)(t.p,{children:"Consider that you have a requirement to pass the data of the user who is using the chat widget. In such cases, you can use payload to pass data from your website to the bot. For example, payload passes the data such as account IDs, customer identifiers like names, email addresses, and phone numbers, or other metadata associated with a user from your website to the bot."}),"\n",(0,i.jsx)(t.p,{children:"In the payload, you need to create a string that is a key-value pair consisting of data and its value (in lower case). The data must have string-to-string key-value pairs. Payload is passed in JSON format. An error is displayed when data other than key-value is passed in the JSON code."}),"\n",(0,i.jsxs)(t.admonition,{type:"note",children:[(0,i.jsx)(t.mdxAdmonitionTitle,{children:(0,i.jsx)(t.strong,{children:"payload security"})}),(0,i.jsx)(t.p,{children:"Payload is securely passed in HTTPS post request to secure the information passed in it."})]}),"\n",(0,i.jsx)(t.p,{children:"In this article, you will learn:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"#data",children:"How to pass the payload data"})}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"1-pass-values-from-the-web-client-to-the-bot",children:"1. Pass values from the web client to the bot"}),"\n",(0,i.jsxs)(t.p,{children:["To pass values from your parent interface to the bot, you can make use of ",(0,i.jsx)(t.strong,{children:"payload data"}),", which needs to be configured in the bot script and init function."]}),"\n",(0,i.jsx)(t.h3,{id:"11-pass-payload-data-via-bot-script",children:"1.1 Pass payload data via bot script"}),"\n",(0,i.jsxs)(t.p,{children:["To pass the payload data via script, paste the bot script at the end of the ",(0,i.jsx)(t.code,{children:"</body>"})," tag"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Following is a sample bot script:"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-c",children:'<script type="text/javascript">\nwindow.ymConfig = {"bot":"x1657623696077","host":"https://cloud.yellow.ai"};\n(function() {\n    var w = window,\n        ic = w.YellowMessenger;\n    if ("function" === typeof ic) ic("reattach_activator"), ic("update", ymConfig);\n    else {\n        var d = document,\n            i = function() {\n                i.c(arguments)\n            };\n\n        function l() {\n            var e = d.createElement("script");\n            e.type = "text/javascript", e.async = !0, e.src = "https://cdn.yellowmessenger.com/plugin/widget-v2/latest/dist/main.min.js";\n            var t = d.getElementsByTagName("script")[0];\n            t.parentNode.insertBefore(e, t)\n        }\n        i.q = [], i.c = function(e) {\n            i.q.push(e)\n        }, w.YellowMessenger = i, w.attachEvent ? w.attachEvent("onload", l) : w.addEventListener("load", l, !1)\n    }\n})(); \n<\/script>\n'})}),"\n",(0,i.jsx)(t.p,{children:"Add the payload data in the following bot script:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-c",children:'<script type="text/javascript">\nwindow.ymConfig = {"bot":"x1657623696077","host":"https://cloud.yellow.ai", "payload": {\n                "name": "YellowDemo1",             // Add payload data here\n                "phoneNumber": "08123546465",      // The values can be dynamic\n                "email": "YellowDemo1@mail.com",\n            },};\n(function() {\n    var w = window,\n        ic = w.YellowMessenger;\n    if ("function" === typeof ic) ic("reattach_activator"), ic("update", ymConfig);\n    else {\n        var d = document,\n            i = function() {\n                i.c(arguments)\n            };\n\n        function l() {\n            var e = d.createElement("script");\n            e.type = "text/javascript", e.async = !0, e.src = "https://cdn.yellowmessenger.com/plugin/widget-v2/latest/dist/main.min.js";\n            var t = d.getElementsByTagName("script")[0];\n            t.parentNode.insertBefore(e, t)\n        }\n        i.q = [], i.c = function(e) {\n            i.q.push(e)\n        }, w.YellowMessenger = i, w.attachEvent ? w.attachEvent("onload", l) : w.addEventListener("load", l, !1)\n    }\n})(); \n<\/script>\n'})}),"\n",(0,i.jsxs)(t.p,{children:["The bot is initilized when the page loads. Once the bot loads, you can assign these values to variables using ",(0,i.jsx)(t.a,{href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/nodes/action-nodes#variables",children:"Variables node"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["Variable format is ",(0,i.jsx)(t.code,{children:"{{{profile.payload.Your_Field_Name}}"})]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:"https://i.imgur.com/3Np2ozp.png",alt:""})}),"\n",(0,i.jsx)(t.h3,{id:"12-pass-payload-data-via-init-function",children:"1.2 Pass payload data via init function"}),"\n",(0,i.jsx)(t.p,{children:"You can also pass the payload data via the init function. If you want to reinitialize the bot with a new payload, you can use the below script:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-c",children:"\twindow.YellowMessengerPlugin.init({\n\t\tpayload: {\n\t\t\temail: 'ted.lasso@yellow.ai',\n\t\t\tmember_id: '1231basd' // you can pass any info you want to be associated with the user based on your use case here. Note that this can be read by the bot using the {{profile.payload.member_id}} variable.\n\t\t}\n\t});\n"})})]})}function p(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);