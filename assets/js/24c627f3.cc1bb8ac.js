"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[35083],{603905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(667294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(n),h=o,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||r;return n?a.createElement(m,s(s({ref:t},p),{},{components:n})):a.createElement(m,s({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,s=new Array(r);s[0]=h;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[d]="string"==typeof e?e:o,s[1]=i;for(var c=2;c<r;c++)s[c]=n[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},423799:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return i},metadata:function(){return c},toc:function(){return d}});var a=n(487462),o=n(263366),r=(n(667294),n(603905)),s=["components"],i={title:"Sync database",sidebar_label:"Sync database"},l=void 0,c={unversionedId:"platform_concepts/studio/build/nodes/action-nodes-overview/sync-database",id:"platform_concepts/studio/build/nodes/action-nodes-overview/sync-database",title:"Sync database",description:"This node is only available when a flow is created as a workflow.",source:"@site/docs/platform_concepts/studio/build/nodes/action-nodes-overview/sync-database.md",sourceDirName:"platform_concepts/studio/build/nodes/action-nodes-overview",slug:"/platform_concepts/studio/build/nodes/action-nodes-overview/sync-database",permalink:"/docs/platform_concepts/studio/build/nodes/action-nodes-overview/sync-database",draft:!1,tags:[],version:"current",frontMatter:{title:"Sync database",sidebar_label:"Sync database"},sidebar:"platform_concepts",previous:{title:"Set language",permalink:"/docs/platform_concepts/studio/build/nodes/action-nodes-overview/set-language"},next:{title:"Send event",permalink:"/docs/platform_concepts/studio/build/nodes/action-nodes-overview/send-event-node"}},p={},d=[],u={toc:d};function h(e){var t=e.components,n=(0,o.Z)(e,s);return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"This node is only available when a flow is created as a ",(0,r.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/Flows/journeys#create-a-skill"},"workflow"),". ")),(0,r.kt)("p",null,"The Sync database node lets your bot synchronize its database with external databases via APIs. This node streamlines the process of automating data synchronization with external databases."),(0,r.kt)("p",null,"Let's say you have a bot that assists with inventory management for an e-commerce website. You want to ensure that the inventory data in your bot's database is always up-to-date with your main inventory database. By using the ",(0,r.kt)("strong",{parentName:"p"},"Sync database node"),", you can seamlessly integrate your bot's database with your main inventory database, ensuring that any changes or updates made externally are reflected in real-time within your chatbot, thus providing accurate and timely information to your users."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Configure Sync database node")),(0,r.kt)("p",null,"To configure the ",(0,r.kt)("strong",{parentName:"p"},"Sync Database")," node, follow these steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Drag and drop the ",(0,r.kt)("strong",{parentName:"p"},"Sync Database")," node to flow editor."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{parentName:"p",src:"https://imgur.com/RkLZsbJ.png",alt:null}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In ",(0,r.kt)("strong",{parentName:"p"},"API"),", choose the preferred API in the drop- down. For steps to add a new API to the bot, click ",(0,r.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/studio/api/add-api"},"here"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In API response type, choose the response type of the API added. ",(0,r.kt)("strong",{parentName:"p"},"JSON")," and ",(0,r.kt)("strong",{parentName:"p"},"CSV")," are the options available. Fill the following fields based on the option selected.\ni. ",(0,r.kt)("strong",{parentName:"p"},"JSON path selector:(this field is available only for the JSON response)"),' Select the path where the relevant data lies in the JSON response. For example, the JSON path  for the following code would be  "data.results.*'))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},"{\n  data: {\n    results: {\n      record1 :{},\n      record2: {},\n      ........\n      } \n  }\n}\n")),(0,r.kt)("p",null,"   ii. ",(0,r.kt)("strong",{parentName:"p"},"Parse API response:")," Choose the function that contains the transformation logic. This helps access individual row attributes. Note that, the column names in the table should be exactly the same as the attribute names."),(0,r.kt)("p",null," ",(0,r.kt)("strong",{parentName:"p"},"Sample code")),(0,r.kt)("p",null,"   (This is optional for CSV)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"return new Promise(resolve => {\n let record = ymLib.args.record;\n /*\n   record is an object, representing a row. all values will be of type string, keys will be fetched from the csv-header.\n */\n resolve({\n   identifier: record.identifier,\n   category: record.category\n });\n});\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"iii. **Store Response in:** Choose the variable in which the response of this node should be stored.\niv. **Select table:** Choose the database table in which the data should be populated.\niv. **Select action:** Choose the following preferred actions:\n - **Insert**: Adds rows from API response.\n - **Update**: Compares rows from API response to the existing table and checks if there is a match in Unique ID and updates those rows.\n - **Import**: Truncates existing table completely and replaces it with data from API response.\n")),(0,r.kt)("p",null,"To use this node in a flow:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Create a ",(0,r.kt)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/studio/events/event-hub#schedule-events"},"Schedule Event")," (if there is a requirement to schedule the database updates)."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/studio/api/add-api"},"Add the API")," and ",(0,r.kt)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/studio/database#create-database-table"},"create a database table "),"in the required format (template without any rows).\n:::note")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The column names in the table should be exactly the same as the attribute names in the JSON response. "),(0,r.kt)("li",{parentName:"ul"},"All the rows will be imported, processed and sent to the selected table to perform the selected action.\n:::")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Create or open a ",(0,r.kt)("a",{parentName:"li",href:"https://docs.yellow.ai/docs/platform_concepts/studio/build/Flows/journeys#create-a-skill"},"skill"),". On the start node, select the scheduled event as the start trigger. ")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/BpOb6o5.png",alt:null})),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"Connect the start node to the ",(0,r.kt)("strong",{parentName:"li"},"Sync Database")," node."),(0,r.kt)("li",{parentName:"ol"},"When the Sync DB node gets triggered, it pulls all the data through API. "),(0,r.kt)("li",{parentName:"ol"},"On the scheduled time, status of the sync can be viewed in ",(0,r.kt)("strong",{parentName:"li"},"status")," object.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"{\nsuccess: true,\nerror : 'if any, we show it',\nrecordsProcessed: 1230,\n}\n")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"When an event is created using the action node, the ",(0,r.kt)("em",{parentName:"p"},"eventID")," can be found in the response (payload) of that action node.")),(0,r.kt)("p",null,"Watch this video to see how this node works:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.loom.com/share/1e7104db203c4061a5d6839ea515198e"},(0,r.kt)("img",{parentName:"a",src:"https://cdn.loom.com/sessions/thumbnails/1e7104db203c4061a5d6839ea515198e-with-play.gif",alt:"Sync DB node"}))))}h.isMDXComponent=!0}}]);