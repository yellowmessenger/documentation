"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[78246],{603905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return k}});var o=n(667294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},l=Object.keys(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var r=o.createContext({}),s=function(e){var t=o.useContext(r),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return o.createElement(r.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,r=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),c=s(n),m=a,k=c["".concat(r,".").concat(m)]||c[m]||d[m]||l;return n?o.createElement(k,i(i({ref:t},u),{},{components:n})):o.createElement(k,i({ref:t},u))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,i=new Array(l);i[0]=m;var p={};for(var r in t)hasOwnProperty.call(t,r)&&(p[r]=t[r]);p.originalType=e,p[c]="string"==typeof e?e:a,i[1]=p;for(var s=2;s<l;s++)i[s]=n[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},493563:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return r},default:function(){return m},frontMatter:function(){return p},metadata:function(){return s},toc:function(){return c}});var o=n(487462),a=n(263366),l=(n(667294),n(603905)),i=["components"],p={title:"Building custom apps with YApps SDK",sidebar_label:"Custom Apps with YApps"},r=void 0,s={unversionedId:"cookbooks/customapps",id:"cookbooks/customapps",title:"Building custom apps with YApps SDK",description:"Introduction",source:"@site/docs/cookbooks/customapps.md",sourceDirName:"cookbooks",slug:"/cookbooks/customapps",permalink:"/docs/cookbooks/customapps",draft:!1,tags:[],version:"current",frontMatter:{title:"Building custom apps with YApps SDK",sidebar_label:"Custom Apps with YApps"},sidebar:"cookbooks",previous:{title:"Bot region",permalink:"/docs/cookbooks/botregion"},next:{title:"Troubleshooting voice bots",permalink:"/docs/cookbooks/Voice/voicebottroubleshooting"}},u={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Building and deploying a custom app",id:"building-and-deploying-a-custom-app",level:2},{value:"Deployment methods",id:"deployment-methods",level:2},{value:"1. In-House deployment (Using yellow cloud infrastructure)",id:"1-in-house-deployment-using-yellow-cloud-infrastructure",level:3},{value:"Step 1: Develop the custom app",id:"step-1-develop-the-custom-app",level:4},{value:"Step 2: Build the Custom App",id:"step-2-build-the-custom-app",level:4},{value:"Step 3: Deployment &amp; Access",id:"step-3-deployment--access",level:4},{value:"2. On-Prem deployment (Customer\u2019s infrastructure)",id:"2-on-prem-deployment-customers-infrastructure",level:3},{value:"Using the YApps SDK",id:"using-the-yapps-sdk",level:2},{value:"Importing the SDK",id:"importing-the-sdk",level:3},{value:"Available Methods",id:"available-methods",level:3},{value:"1. Ticket Methods",id:"1-ticket-methods",level:4},{value:"2. Ticket Custom Field Methods",id:"2-ticket-custom-field-methods",level:4},{value:"3. Agent Methods",id:"3-agent-methods",level:4},{value:"Testing the Custom App on Cloud",id:"testing-the-custom-app-on-cloud",level:2},{value:"Custom App Configuration",id:"custom-app-configuration",level:2},{value:"Example cURL request:",id:"example-curl-request",level:3},{value:"Configuration Properties Explained",id:"configuration-properties-explained",level:3},{value:"Deploying to production",id:"deploying-to-production",level:2}],d={toc:c};function m(e){var t=e.components,n=(0,a.Z)(e,i);return(0,l.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"introduction"},"Introduction"),(0,l.kt)("p",null,"The YApps SDK enables the integration of custom applications within the Yellow Cloud platform. These apps are embedded as iframes within the parent application, allowing for extended functionalities such as customer management, custom visualizations, and dynamic workflows. The SDK ensures secure communication between the parent app and custom apps while controlling embedding permissions and interactions."),(0,l.kt)("h2",{id:"building-and-deploying-a-custom-app"},"Building and deploying a custom app"),(0,l.kt)("p",null,"This guide provides a step-by-step process for building and deploying a custom app named ",(0,l.kt)("inlineCode",{parentName:"p"},"color-picker")," for a customer named ",(0,l.kt)("inlineCode",{parentName:"p"},"bluewall"),"."),(0,l.kt)("h2",{id:"deployment-methods"},"Deployment methods"),(0,l.kt)("p",null,"Custom apps can be deployed using one of the following methods:"),(0,l.kt)("h3",{id:"1-in-house-deployment-using-yellow-cloud-infrastructure"},"1. In-House deployment (Using yellow cloud infrastructure)"),(0,l.kt)("h4",{id:"step-1-develop-the-custom-app"},"Step 1: Develop the custom app"),(0,l.kt)("p",null,"To develop a custom app, follow these steps:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Clone the repository: ",(0,l.kt)("inlineCode",{parentName:"li"},"yellowdotai/chat-components")),(0,l.kt)("li",{parentName:"ol"},"Navigate to ",(0,l.kt)("inlineCode",{parentName:"li"},"yellowdotai/chat-components/views/yapps/")),(0,l.kt)("li",{parentName:"ol"},"Create a new folder with the customer name (",(0,l.kt)("inlineCode",{parentName:"li"},"bluewall")," in this case)."),(0,l.kt)("li",{parentName:"ol"},"Place all the customer\u2019s custom apps within this folder.")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Example directory structure:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"yellowdotai/chat-components/views/yapps/bluewall/color-picker\n")),(0,l.kt)("h4",{id:"step-2-build-the-custom-app"},"Step 2: Build the Custom App"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Choose a tech stack such as React, Angular, or Vanilla JavaScript."),(0,l.kt)("li",{parentName:"ol"},"Ensure that the final build files are stored inside the ",(0,l.kt)("inlineCode",{parentName:"li"},"dist/")," folder within the app directory."),(0,l.kt)("li",{parentName:"ol"},"Use a bundler such as Webpack or Vite for optimized builds."),(0,l.kt)("li",{parentName:"ol"},"Minify and optimize assets to reduce load time."),(0,l.kt)("li",{parentName:"ol"},"Implement cross-origin isolation to prevent security vulnerabilities.")),(0,l.kt)("h4",{id:"step-3-deployment--access"},"Step 3: Deployment & Access"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Create a Pull Request (PR) and submit it for review to the repository owners."),(0,l.kt)("li",{parentName:"ol"},"Use Jenkins CI/CD pipelines to automate the deployment."),(0,l.kt)("li",{parentName:"ol"},"Perform both static and dynamic security testing before merging the PR."),(0,l.kt)("li",{parentName:"ol"},"Deploy the custom app and access it using the following URL format:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"https://app.yellowmessenger.com/components/{customerName}/{appName}\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Example:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"https://app.yellowmessenger.com/components/bluewall/color-picker\n")),(0,l.kt)("h3",{id:"2-on-prem-deployment-customers-infrastructure"},"2. On-Prem deployment (Customer\u2019s infrastructure)"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"The app is hosted on the customer\u2019s infrastructure instead of Yellow Cloud."),(0,l.kt)("li",{parentName:"ul"},"The YApps SDK must be included using the following CDN:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"https://cdn.yellowmessenger.com/yapps-sdk/v1.0.0/widget.js\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Ensure that the app is deployed to a publicly accessible URL."),(0,l.kt)("li",{parentName:"ul"},"Implement strict security measures such as Content Security Policy (CSP) headers to prevent cross-site scripting (XSS) attacks."),(0,l.kt)("li",{parentName:"ul"},"Enforce HTTPS and TLS encryption for secure communication.")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"using-the-yapps-sdk"},"Using the YApps SDK"),(0,l.kt)("p",null,"The YApps SDK provides methods that allow custom apps to securely interact with the Yellow Cloud platform."),(0,l.kt)("h3",{id:"importing-the-sdk"},"Importing the SDK"),(0,l.kt)("p",null,"To use the SDK in your custom app, import it as follows:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'import { YAppWidget } from "@yellow/yapps/dist/widget.js";\nconst yAppWidget = new YAppWidget();\n')),(0,l.kt)("h3",{id:"available-methods"},"Available Methods"),(0,l.kt)("h4",{id:"1-ticket-methods"},"1. Ticket Methods"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Fetch ticket details"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const ticket = await yAppWidget.getTicket();\n")),(0,l.kt)("h4",{id:"2-ticket-custom-field-methods"},"2. Ticket Custom Field Methods"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Fetch ticket custom fields"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const customFields = await yAppWidget.getTicketCF();\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Update ticket custom fields"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'await yAppWidget.updateTicketCF({ key: "value" });\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Disable a custom field"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'await yAppWidget.disableTicketCF("custom_field_1");\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Enable a custom field"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'await yAppWidget.enableTicketCF("custom_field_1");\n')),(0,l.kt)("h4",{id:"3-agent-methods"},"3. Agent Methods"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Fetch agent details"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const agent = await yAppWidget.getAgent();\n")),(0,l.kt)("h2",{id:"testing-the-custom-app-on-cloud"},"Testing the Custom App on Cloud"),(0,l.kt)("p",null,"After development, test the app by adding it as a custom app in the sandbox or staging environment of the customer\u2019s bot on the Yellow Cloud platform."),(0,l.kt)("h2",{id:"custom-app-configuration"},"Custom App Configuration"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"custom-app-config")," endpoint allows for the management of custom app settings via API requests (GET, POST, PATCH, DELETE)."),(0,l.kt)("h3",{id:"example-curl-request"},"Example cURL request:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},'curl --location \'https://${regionCode}.cloud.yellow.ai/api/agents/settings/custom-app-config?bot=${botId}\' \\\n--header \'Cookie: ym_xid=${ymXid}\' \\\n--header \'Content-Type: application/json\' \\\n--data \'{\n    "description": "Color Picker",\n    "defaultContext": [],\n    "enabled": true,\n    "name": "bluewall color picker",\n    "url": "https://app.yellowmessenger.com/components/bluewall/color-picker",\n    "iconUrl": "https://cdn.yellowmessenger.com/assets/bluewall-logo.png",\n    "trigger": "live-forever",\n    "type": "ephemeral",\n    "location": "inbox.email.ticket.sidebar"\n}\'\n')),(0,l.kt)("h3",{id:"configuration-properties-explained"},"Configuration Properties Explained"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"description"),": A brief summary of the app\u2019s purpose."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"defaultContext"),": Context parameters to pass to the app. Leave empty if not needed."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"enabled"),": Boolean flag to enable (",(0,l.kt)("inlineCode",{parentName:"li"},"true"),") or disable (",(0,l.kt)("inlineCode",{parentName:"li"},"false"),") the app."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"name"),": Display name of the custom app."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"url"),": The endpoint where the app is hosted."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"iconUrl"),": URL for the app icon (must be publicly accessible)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"trigger"),": Defines how the app is activated (e.g., click, hover). Leave empty for now."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"type"),":",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ephemeral"),": Displays the app in the right sidebar of email or chat tickets."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"persistent"),": Runs in the background without a visible UI."))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"location"),": Determines where the app is displayed (e.g., ",(0,l.kt)("inlineCode",{parentName:"li"},"inbox.email.ticket.sidebar"),").")),(0,l.kt)("p",null,"After successful testing, update the configuration for production deployment."),(0,l.kt)("h2",{id:"deploying-to-production"},"Deploying to production"),(0,l.kt)("p",null,"To deploy the custom app to production, follow these best practices:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Automate deployment using Jenkins or GitHub Actions."),(0,l.kt)("li",{parentName:"ul"},"Implement rollback strategies to revert changes in case of deployment failures."),(0,l.kt)("li",{parentName:"ul"},"Use monitoring tools such as Prometheus and Grafana for logging and tracking performance."),(0,l.kt)("li",{parentName:"ul"},"Apply API rate limiting and other security measures to protect against excessive API calls.")),(0,l.kt)("hr",null),(0,l.kt)("p",null,"The YApps SDK provides a structured and secure approach to building, deploying, and integrating custom applications on the Yellow Cloud platform. By following these best practices, developers can ensure a seamless and efficient extension of platform functionalities while maintaining high security and performance standards."))}m.isMDXComponent=!0}}]);