"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[62594],{26453:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>d,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"platform_concepts/growth/dataexplorer/configure-data","title":"Configure data on default tables","description":"You can configure data using the following options on the default tables:","source":"@site/docs/platform_concepts/growth/dataexplorer/configure-data.md","sourceDirName":"platform_concepts/growth/dataexplorer","slug":"/platform_concepts/growth/dataexplorer/configure-data","permalink":"/docs/platform_concepts/growth/dataexplorer/configure-data","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Configure data on default tables","sidebar_label":"Configure data"},"sidebar":"platform_concepts","previous":{"title":"Analyze default tables","permalink":"/docs/platform_concepts/growth/dataexplorer/defaulttables"},"next":{"title":"Default DB table descriptions","permalink":"/docs/cookbooks/insights/eventdescriptions"}}');var a=n(74848),s=n(28453);const i={title:"Configure data on default tables",sidebar_label:"Configure data"},d=void 0,o={},c=[{value:"Push custom data to default tables",id:"push-custom-data-to-default-tables",level:2},{value:"Secure PII data on default tables",id:"secure-pii-data-on-default-tables",level:2},{value:"Steps to generate a public key",id:"steps-to-generate-a-public-key",level:3}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"You can configure data using the following options on the default tables:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Push custom data"}),": You have the capability to push custom data available in the user's 360 profile into the default tables."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Secure data"}),": You can enhance the security of your users' data, including personally identifiable information (PII) like names, email addresses, or phone numbers, by encrypting it."]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"push-custom-data-to-default-tables",children:"Push custom data to default tables"}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"API events, Bot events, Message events, and User engagement events"})," tables have two columns blank by default, CUSTOMID 1\tand CUSTOMID 2. You can choose to push any of the user properties that are stored on ",(0,a.jsx)(t.a,{href:"https://docs.yellow.ai/docs/platform_concepts/engagement/cdp/user_data/user_properties",children:"user360"})," to all those default tables."]}),"\n",(0,a.jsx)(t.admonition,{type:"note",children:(0,a.jsx)(t.p,{children:"This action is irreversible. Once you configure it, the column(s) added will remain as a part of the default tables."})}),"\n",(0,a.jsx)(t.p,{children:"Steps to push custom data to default tables:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["Add a new user property on the ",(0,a.jsx)(t.a,{href:"https://docs.yellow.ai/docs/platform_concepts/engagement/cdp/user_data/user_properties#custom-user-properties",children:"user360"})," page."]}),"\n",(0,a.jsxs)(t.li,{children:["Click ",(0,a.jsx)(t.strong,{children:"Data explorer"})," > ",(0,a.jsx)(t.strong,{children:"Configure"}),".\n",(0,a.jsx)(t.img,{src:"https://cdn.yellowmessenger.com/assets/docs/image-11.png",alt:"image"})]}),"\n",(0,a.jsxs)(t.li,{children:["Select ",(0,a.jsx)(t.strong,{children:"Map custom data"}),". From the dropdown menu, choose a property (the custom data you want to push to API events, Bot events, Message events, and User engagement events tables) for CUSTOMID 1 and CUSTOMID 2.\n",(0,a.jsx)(t.img,{src:"https://cdn.yellowmessenger.com/assets/docs/image-9.png",alt:"image"})]}),"\n",(0,a.jsxs)(t.li,{children:["Click ",(0,a.jsx)(t.strong,{children:"Configure"})," and ",(0,a.jsx)(t.strong,{children:"Add"}),". Your custom data will get populated in the default tables.","\n",(0,a.jsx)("img",{src:"https://cdn.yellowmessenger.com/assets/docs/image-10.png",width:"50%"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.admonition,{type:"note",children:(0,a.jsx)(t.p,{children:"CUSTOMID 2 can be added only after adding CUSTOMID 1."})}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h2,{id:"secure-pii-data-on-default-tables",children:"Secure PII data on default tables"}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.strong,{children:"Secure data"})," feature allows users to encrypt personally identifiable information (PII) data during export and within the user interface of data explorer tables. This encryption of PII data applies to all users, with the exception of super admins, who will retain access to the unencrypted original data."]}),"\n",(0,a.jsx)(t.p,{children:"Follow the steps below to secure PII data within default tables:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["Click ",(0,a.jsx)(t.strong,{children:"Data explorer"})," > ",(0,a.jsx)(t.strong,{children:"Configure"}),".\n",(0,a.jsx)(t.img,{src:"https://cdn.yellowmessenger.com/assets/docs/image-11.png",alt:"image"})]}),"\n",(0,a.jsxs)(t.li,{children:["Enable the option to encrypt PII data and enter your ",(0,a.jsx)(t.strong,{children:"Public key"}),".\n",(0,a.jsx)(t.img,{src:"https://cdn.yellowmessenger.com/assets/docs/image-12.png",alt:"image"})]}),"\n",(0,a.jsx)(t.li,{children:"A summary will be displayed, showing which tables and columns will be encrypted. This data will be encrypted in the table UI in Data Explorer, the table UI in Reporting, during export from Data Explorer, and during export from Data export."}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Encrypted data:"}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Tables"}),(0,a.jsx)(t.th,{children:"ColumnsColumns"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"API events"}),(0,a.jsx)(t.td,{children:"UID, BID"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Message events"}),(0,a.jsx)(t.td,{children:"UID, BID"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"User engagement events"}),(0,a.jsx)(t.td,{children:"UID, BID"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"User feedback"}),(0,a.jsx)(t.td,{children:"UID"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Inbox events"}),(0,a.jsx)(t.td,{children:"UID, AgentId"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Inbox call records"}),(0,a.jsx)(t.td,{children:"UID"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Chat tickets"}),(0,a.jsx)(t.td,{children:"User_ID, Contact_phone, Contact_email, Contact_name"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Email tickets"}),(0,a.jsx)(t.td,{children:"Contact_first_name, Contact_email"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Video chats"}),(0,a.jsx)(t.td,{children:"Client_name, Client_email"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Notifications report"}),(0,a.jsx)(t.td,{children:"UserID, SenderID, cdpUserID"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Call details report"}),(0,a.jsx)(t.td,{children:"SourceNumber, DestinationNumber"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Leads"}),(0,a.jsx)(t.td,{children:"UID, BID"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Conversations"}),(0,a.jsx)(t.td,{children:"UID, userName, replyTo, answeredBy"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Bot tables"}),(0,a.jsx)(t.td,{children:"Masked columns will be encrypted (builder configuration)"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Analytics (Under Custom Tables)"}),(0,a.jsx)(t.td,{children:"UID, BID"})]})]})]}),"\n",(0,a.jsxs)(t.ol,{start:"4",children:["\n",(0,a.jsxs)(t.li,{children:["Click ",(0,a.jsx)(t.strong,{children:"Configure"})," to save the configuration and encrypt all PII data."]}),"\n"]}),"\n",(0,a.jsx)(t.admonition,{type:"note",children:(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Data will be encrypted for all users except Super Admin"}),"\n",(0,a.jsx)(t.li,{children:"Configuration can be done by only Admins and Super Admin"}),"\n",(0,a.jsx)(t.li,{children:"Aggregations on encrypted fields should be allowed"}),"\n",(0,a.jsx)(t.li,{children:"Filters and groupBy on encrypted fields will not be possible"}),"\n"]})}),"\n",(0,a.jsx)(t.h3,{id:"steps-to-generate-a-public-key",children:"Steps to generate a public key"}),"\n",(0,a.jsx)(t.p,{children:"Follow these steps to generate the keys for encryption:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Generate private key:"}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"openssl genpkey -algorithm RSA -pkeyopt rsa_keygen_bits:4096 -out private_key.pem\n"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Extract public key from private key:"}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"openssl rsa -pubout -in private_key.pem -out public_key.pem\n"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Copy the public key and paste at Yellow Platform:"}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"pbcopy < public_key.pem\n"})}),"\n",(0,a.jsx)(t.p,{children:"The private key should be kept secure for decrypting encrypted data. Any tool that supports RSA decryption can be used with the key."}),"\n",(0,a.jsxs)(n,{children:[(0,a.jsx)("summary",{children:" Sample code for decryption in Node.js "}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'const crypto = require("crypto")\n\n// Decrypt using the private key\nconst decryptRSA = (privateKey, encryptedData) => {\n    const encryptedDataBuffer = Buffer.from(encryptedData, \'base64\');\n    const decryptedDataBuffer = crypto.privateDecrypt({\n        key: privateKey,\n        padding: crypto.constants.RSA_PKCS1_OAEP_PADDING,\n        oaepHash: "sha256"\n    }, encryptedDataBuffer);\n    return JSON.parse(decryptedDataBuffer.toString(\'utf-8\'));\n};\n\nprivateKey = `<YOUR PRIVATE KEY>`\nencryptedData = "<cipherText>"\n\nconsole.log(`decrytedData - ${decryptRSA(privateKey, encryptedData)}`);\n\n'})})]}),"\n",(0,a.jsxs)(n,{children:[(0,a.jsx)("summary",{children:" Sample code for decryption in Python "}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'from cryptography.hazmat.backends import default_backend\nfrom cryptography.hazmat.primitives import serialization, hashes\nfrom cryptography.hazmat.primitives.asymmetric import padding\nimport base64\nimport json\n\n# RSA private key in PEM format\nprivate_key_pem = """<YOUR PRIVATE KEY>"""\n\ncipherText = "<cipherText>"\n\n# Load the private key\nprivate_key = serialization.load_pem_private_key(\n    private_key_pem.encode(),\n    password=None,\n    backend=default_backend()\n)\n\n# Decode and decrypt the data\nencrypted_data = base64.b64decode(cipherText)\ndecrypted_data = private_key.decrypt(\n    encrypted_data,\n    padding.OAEP(\n        mgf=padding.MGF1(algorithm=hashes.SHA256()),\n        algorithm=hashes.SHA256(),\n        label=None\n    )\n)\n\nprint("Decrypted Data:", json.loads(decrypted_data.decode(\'utf-8\')))\n\n'})})]}),"\n",(0,a.jsxs)(n,{children:[(0,a.jsx)("summary",{children:" Sample code for decryption in Java "}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'import java.security.KeyFactory;\nimport java.security.PrivateKey;\nimport java.security.spec.PKCS8EncodedKeySpec;\nimport java.util.Base64;\nimport javax.crypto.Cipher;\nimport java.security.spec.MGF1ParameterSpec;\nimport javax.crypto.spec.PSource;\nimport javax.crypto.spec.OAEPParameterSpec;\n\n\npublic class RSADecryption {\n    public static void main(String[] args) throws Exception {\n        String privateKeyPEM = "<YOUR PRIVATE KEY>";  // RSA private key in PEM format\n        PrivateKey privateKey = getPrivateKeyFromString(privateKeyPEM);\n        \n        // Base64-encoded encrypted data\n        String encryptedDataBase64 = "<cipherText>";\n        byte[] encryptedData = Base64.getDecoder().decode(encryptedDataBase64);\n        \n        // Decrypt the encrypted data using the private key\n        String decryptedText = decryptWithPrivateKey(encryptedData, privateKey);\n \n        System.out.println("Decrypted Text: " + decryptedText);\n    }\n\n    // Convert PEM private key string to PrivateKey object\n    public static PrivateKey getPrivateKeyFromString(String privateKeyPEM) throws Exception {\n        privateKeyPEM = privateKeyPEM\n                .replace("-----BEGIN PRIVATE KEY-----", "")\n                .replace("-----END PRIVATE KEY-----", "")\n                .replaceAll("\\\\s+", ""); // Remove whitespace characters\n\n        byte[] privateKeyBytes = Base64.getDecoder().decode(privateKeyPEM);\n        PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(privateKeyBytes);\n        KeyFactory keyFactory = KeyFactory.getInstance("RSA");\n        return keyFactory.generatePrivate(keySpec);\n    }\n\n    // Decrypt data using the private key\n    public static String decryptWithPrivateKey(byte[] encryptedData, PrivateKey privateKey) throws Exception {\n        Cipher cipher = Cipher.getInstance("RSA/ECB/OAEPWithSHA-256AndMGF1Padding");\n        cipher.init(Cipher.DECRYPT_MODE, privateKey, new OAEPParameterSpec("SHA-256", "MGF1", MGF1ParameterSpec.SHA256, PSource.PSpecified.DEFAULT));\n        byte[] decryptedBytes = cipher.doFinal(encryptedData);\n        return new String(decryptedBytes, "UTF-8");\n    }\n}\n\n'})})]})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>d});var r=n(96540);const a={},s=r.createContext(a);function i(e){const t=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);