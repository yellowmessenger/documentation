"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[75301],{603905:function(t,e,n){n.d(e,{Zo:function(){return c},kt:function(){return k}});var a=n(667294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var p=a.createContext({}),s=function(t){var e=a.useContext(p),n=e;return t&&(n="function"==typeof t?t(e):l(l({},e),t)),n},c=function(t){var e=s(t.components);return a.createElement(p.Provider,{value:e},t.children)},m="mdxType",u={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},d=a.forwardRef((function(t,e){var n=t.components,r=t.mdxType,o=t.originalType,p=t.parentName,c=i(t,["components","mdxType","originalType","parentName"]),m=s(n),d=r,k=m["".concat(p,".").concat(d)]||m[d]||u[d]||o;return n?a.createElement(k,l(l({ref:e},c),{},{components:n})):a.createElement(k,l({ref:e},c))}));function k(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var o=n.length,l=new Array(o);l[0]=d;var i={};for(var p in e)hasOwnProperty.call(e,p)&&(i[p]=e[p]);i.originalType=t,i[m]="string"==typeof t?t:r,l[1]=i;for(var s=2;s<o;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},893291:function(t,e,n){n.r(e),n.d(e,{assets:function(){return c},contentTitle:function(){return p},default:function(){return d},frontMatter:function(){return i},metadata:function(){return s},toc:function(){return m}});var a=n(487462),r=n(263366),o=(n(667294),n(603905)),l=["components"],i={title:"Billdesk UPI integration",sidebar_label:"Billdesk UPI"},p=void 0,s={unversionedId:"platform_concepts/appConfiguration/billdesk",id:"platform_concepts/appConfiguration/billdesk",title:"Billdesk UPI integration",description:"Yellow.ai Integration with Billdesk UPI Payment Gateway allows you to create UPI Intent for WA Pay, view payment status and Send UPI notification with the yellow.ai platform.",source:"@site/docs/platform_concepts/appConfiguration/billdesk.md",sourceDirName:"platform_concepts/appConfiguration",slug:"/platform_concepts/appConfiguration/billdesk",permalink:"/docs/platform_concepts/appConfiguration/billdesk",draft:!1,tags:[],version:"current",frontMatter:{title:"Billdesk UPI integration",sidebar_label:"Billdesk UPI"},sidebar:"platform_concepts",previous:{title:"BillDesk EmailPay",permalink:"/docs/platform_concepts/appConfiguration/billdesk-emailpay"},next:{title:"Camspay Payment",permalink:"/docs/platform_concepts/appConfiguration/camspay"}},c={},m=[{value:"Connecting BillDesk to yellow.ai",id:"connecting-billdesk-to-yellowai",level:2},{value:"Events to enable for BillDesk UPI Payment",id:"events-to-enable-for-billdesk-upi-payment",level:3},{value:"BillDesk actions from bot conversations",id:"billdesk-actions-from-bot-conversations",level:2},{value:"1. Generate UPI Intent",id:"1-generate-upi-intent",level:3},{value:"Sample Success Response:",id:"sample-success-response",level:5},{value:"2. Generate UPI Collect",id:"2-generate-upi-collect",level:3},{value:"Sample Success Response:",id:"sample-success-response-1",level:5}],u={toc:m};function d(t){var e=t.components,n=(0,r.Z)(t,l);return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Yellow.ai Integration with Billdesk UPI Payment Gateway allows you to create UPI Intent for WA Pay, view payment status and Send UPI notification with the yellow.ai platform. "),(0,o.kt)("h2",{id:"connecting-billdesk-to-yellowai"},"Connecting BillDesk to yellow.ai"),(0,o.kt)("p",null,"You can connect your account only in development environment and not in live. For a three-tier environment, you can connect an account in Staging and Sandbox environment. Once the bot is published, it will use the integrations if they are configured in the flows."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Get the KeyId, Client Id, Merchant Id, Public Key File and API Base URL from Billdesk Team.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Upload your Public Key file in some bucket or server like (AWS-S3, SFTP, etc) and Get the public CDN Url . Note:(CDN URL should be public readable).")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the ",(0,o.kt)("a",{parentName:"p",href:"https://cloud.yellow.ai"},"Cloud platform"),", navigate to the Development/Staging environment and click ",(0,o.kt)("strong",{parentName:"p"},"Extensions")," > ",(0,o.kt)("strong",{parentName:"p"},"Integrations")," > ",(0,o.kt)("strong",{parentName:"p"},"Payment")," > ",(0,o.kt)("strong",{parentName:"p"},"BillDesk"),". You can also search for the Cashfree app."),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("img",{parentName:"p",src:"https://imgur.com/hzMCuo1.png",alt:null})))),(0,o.kt)("ol",{start:4},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"In ",(0,o.kt)("strong",{parentName:"p"},"Give account name"),", enter a unique name for the integration. You can use only lowercase alphanumeric characters and underscores (_).")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Enter ",(0,o.kt)("strong",{parentName:"p"},"Key ID"),", ",(0,o.kt)("strong",{parentName:"p"},"Client ID"),", ",(0,o.kt)("strong",{parentName:"p"},"Merchant ID"),", ",(0,o.kt)("strong",{parentName:"p"},"BillDesk public key CDN URL"),", ",(0,o.kt)("strong",{parentName:"p"},"API base URL")," and click ",(0,o.kt)("strong",{parentName:"p"},"Connect"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"To connect multiple accounts, click ",(0,o.kt)("strong",{parentName:"p"},"+ Add account")," and follow the instructions mentioned above. You can connect upto 15 accounts per integration."),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("img",{parentName:"p",src:"https://cdn.yellowmessenger.com/NsZFcYu9H3md1666156528149.png",alt:"alt_text",title:"image_tooltip"})))),(0,o.kt)("h3",{id:"events-to-enable-for-billdesk-upi-payment"},"Events to enable for BillDesk UPI Payment"),(0,o.kt)("p",null,"You need to Activate the ",(0,o.kt)("strong",{parentName:"p"},"Billdesk Payment Status")," after integrating BillDesk."),(0,o.kt)("p",null,"To know how to enable events, refer to ",(0,o.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/appConfiguration/overview#step-4-enable-integration-events-in-your-bot"},"this doc"),"."),(0,o.kt)("h2",{id:"billdesk-actions-from-bot-conversations"},"BillDesk actions from bot conversations"),(0,o.kt)("p",null,"Once the Stripe account is connected, you can perform the following actions through bot conversations: Generate UPI intent and Generate UPI collect."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Go to Development/Staging environment and navigate to Automation > Build > Select the flow where you want to add the Generate payment link node.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"Add node")," > ",(0,o.kt)("strong",{parentName:"p"},"Integrations")," > ",(0,o.kt)("strong",{parentName:"p"},"BillDesk"),"."),(0,o.kt)("img",{src:"https://cdn.yellowmessenger.com/kWOnZfYtuAMB1666156690035.png",width:"80%"})),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"In ",(0,o.kt)("strong",{parentName:"p"},"Action"),", choose your preferred action."))),(0,o.kt)("h3",{id:"1-generate-upi-intent"},"1. Generate UPI Intent"),(0,o.kt)("p",null,"Generate UPI collect BillDesk refers to a process where you create a request to collect funds from the user using UPI through the bot conversation. "),(0,o.kt)("p",null,"Get the final amount from your cart total and call the Generate UPI Intent action node of integration, get the transaction Id and Intent URI for whatsapp pay api."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"}," Node Input Params:-")," "),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Field Name"),(0,o.kt)("th",{parentName:"tr",align:null},"Sample Input"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Amount*"),(0,o.kt)("td",{parentName:"tr",align:null},"200"),(0,o.kt)("td",{parentName:"tr",align:null},"The amount for the request.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Additional Parameters"),(0,o.kt)("td",{parentName:"tr",align:null},"any varchar"),(0,o.kt)("td",{parentName:"tr",align:null},"additional_info values that can be attached to the transaction.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Additional Parameters"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"mailto:John@test.com"},"John@test.com")),(0,o.kt)("td",{parentName:"tr",align:null},"additional_info values that can be attached to the transaction.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Additional Parameters"),(0,o.kt)("td",{parentName:"tr",align:null},"Some value"),(0,o.kt)("td",{parentName:"tr",align:null},"additional_info values that can be attached to the transaction.")))),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"To use in the ",(0,o.kt)("a",{parentName:"p",href:"https://app.yellow.ai"},"App platform")," bot use below function.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'app.executeIntegrationAction({\n    "integrationName": "billdesk",\n    "action": "Generate UPI Intent",\n    "dynamicParams": {\n        "amount": 100\n    }\n}).then((res)=>{\n    console.log("response from action node", res);\n    app.log(res, \'||Response from action node||\')\n}).catch((err)=>{\n    console.log("Error in action node",err);\n    app.log(err, \'||Error in action node||\')\n})\n')),(0,o.kt)("h5",{id:"sample-success-response"},"Sample Success Response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "objectid": "transaction",\n  "transactionid": "X7890477676443",\n  "orderid": "UPIODR00000004",\n  "mercid": "BDMERCID",\n  "transaction_date": "2022-03- 18T11:50:27+05:30",\n  "amount": "2.00",\n  "surcharge": "0.00",\n  "txn_process_type": "collect",\n  "bankid": "789",\n  "itemcode": "DIRECT",\n  "auth_status": "0002",\n  "transaction_error_code": "TRP0000",\n  "transaction_error_desc": "Transaction Pending",\n  "transaction_error_type": "pending",\n  "payment_method_type": "upi"\n')),(0,o.kt)("h3",{id:"2-generate-upi-collect"},"2. Generate UPI Collect"),(0,o.kt)("p",null,"The end customer will authorize the transaction via the UPI PSP mobile app. On successful authorisation, BillDesk will receive a callback from the acquirer, and in turn BillDesk will notify the merchant via webhook notification."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"}," Node Input Params:-")," "),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Field Name"),(0,o.kt)("th",{parentName:"tr",align:null},"Sample Input"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Amount*"),(0,o.kt)("td",{parentName:"tr",align:null},"200"),(0,o.kt)("td",{parentName:"tr",align:null},"The amount for the request.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"VPA*"),(0,o.kt)("td",{parentName:"tr",align:null},"billdesk@upi"),(0,o.kt)("td",{parentName:"tr",align:null},"UPI Id of customer")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Additional Parameters"),(0,o.kt)("td",{parentName:"tr",align:null},"any varchar"),(0,o.kt)("td",{parentName:"tr",align:null},"additional_info values that can be attached to the transaction.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Additional Parameters"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"mailto:John@test.com"},"John@test.com")),(0,o.kt)("td",{parentName:"tr",align:null},"additional_info values that can be attached to the transaction.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"Additional Parameters"),(0,o.kt)("td",{parentName:"tr",align:null},"Some value"),(0,o.kt)("td",{parentName:"tr",align:null},"additional_info values that can be attached to the transaction.")))),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"To use in the ",(0,o.kt)("a",{parentName:"p",href:"https://app.yellow.ai"},"App platform")," bot use the below function.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'app.executeIntegrationAction({\n    "integrationName": "billdesk",\n    "action": "Generate UPI Collect",\n    "dynamicParams": {\n        "amount": 100,\n        "vpa":"billdesk@upi",\n        "additionalParameters4":"anything"\n        "additionalParameters5":"anything"\n        "additionalParameters6":"anything"\n    }\n}).then((res)=>{\n    console.log("response from action node", res);\n    app.log(res, \'||Response from action node||\')\n}).catch((err)=>{\n    console.log("Error in action node",err);\n    app.log(err, \'||Error in action node||\')\n})\n')),(0,o.kt)("h5",{id:"sample-success-response-1"},"Sample Success Response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "objectid": "transaction",\n  "transactionid": "X7890477676443",\n  "orderid": "UPIODR00000004",\n  "mercid": "BDMERCID",\n  "transaction_date": "2022-03- 18T11:50:27+05:30",\n  "amount": "2.00",\n  "surcharge": "0.00",\n  "txn_process_type": "collect",\n  "bankid": "789",\n  "itemcode": "DIRECT",\n  "auth_status": "0002",\n  "transaction_error_code": "TRP0000",\n  "transaction_error_desc": "Transaction Pending",\n  "transaction_error_type": "pending",\n  "payment_method_type": "upi"\n')))}d.isMDXComponent=!0}}]);