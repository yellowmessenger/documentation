"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[14754],{603905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var a=n(667294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},p="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(n),d=r,m=p["".concat(s,".").concat(d)]||p[d]||h[d]||i;return n?a.createElement(m,o(o({ref:t},u),{},{components:n})):a.createElement(m,o({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},489402:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return p}});var a=n(487462),r=n(263366),i=(n(667294),n(603905)),o=["components"],l={title:"Generate and implement YM authentication tokens",sidebar_label:"YM authentication"},s=void 0,c={unversionedId:"platform_concepts/Getting Started/security-auth/ymauth",id:"platform_concepts/Getting Started/security-auth/ymauth",title:"Generate and implement YM authentication tokens",description:"YM authentication overview",source:"@site/docs/platform_concepts/Getting Started/security-auth/ymauth.md",sourceDirName:"platform_concepts/Getting Started/security-auth",slug:"/platform_concepts/Getting Started/security-auth/ymauth",permalink:"/docs/platform_concepts/Getting Started/security-auth/ymauth",draft:!1,tags:[],version:"current",frontMatter:{title:"Generate and implement YM authentication tokens",sidebar_label:"YM authentication"},sidebar:"platform_concepts",previous:{title:"SSO with OAuth & SAML",permalink:"/docs/platform_concepts/Getting Started/security-auth/oauth"},next:{title:"IP whitelisting (chat transcript)",permalink:"/docs/platform_concepts/Getting Started/security-auth/chattranscriptsecurity"}},u={},p=[{value:"YM authentication overview",id:"ym-authentication-overview",level:2},{value:"Configure YM authentication token",id:"configure-ym-authentication-token",level:2},{value:'<a name="i1"></a>  Step 1: Make an API call to encrypt your token',id:"--step-1-make-an-api-call-to-encrypt-your-token",level:3},{value:"Step 2: Include the encrypted token in the AI-agent script",id:"step-2-include-the-encrypted-token-in-the-ai-agent-script",level:3},{value:"Step 3: Validate the token for success/failure",id:"step-3-validate-the-token-for-successfailure",level:3},{value:"Success",id:"success",level:4},{value:"Failure",id:"failure",level:4}],h={toc:p};function d(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"ym-authentication-overview"},"YM authentication overview"),(0,i.kt)("p",null,"Yellow.ai Messenger (YM) authentication facilitates the seamless synchronization of previous chat conversations across different devices for authenticated users. Businesses using the yellow.ai's AI-agent can configure YM authentication tokens. "),(0,i.kt)("p",null,"This enables users to access and review their historical conversations, ensuring a consistent chat experience. Users can seamlessly pick up where they left off, regardless of the device used to log into the AI-agent."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"What is YM authentication token?")," "),(0,i.kt)("p",null,"The YM authentication token is a unique ID assigned by the organization to each user. This ID, selected by the organization and provided to the yellow.ai team, should be unique for every customer. Examples of suitable YM authentication tokens include phone numbers, user account numbers, email IDs, reference numbers, etc in an encoded format."),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"In the backend, changing YM Auth tokens and UIDs occurs at regular intervals to ensure data security through YM authentication.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Use cases"),": "),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Seamless conversations across devices"),": Users can switch devices without losing chat history, ensuring a smooth experience."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Tailored customer support"),": Agents use past conversations to provide personalized assistance."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Enhanced security measures"),": Regular changes in authentication tokens protect against unauthorized access."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Data privacy compliance"),": Users control and manage their chat history for privacy compliance."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Multi-user privacy"),": Authentication ensures private chat histories in shared device environments.")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Who can use YM Auth"),": "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"E-commerce"),": Users can review past orders and track deliveries through chat history."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Banking and finance"),": Customers access transaction details and support interactions from previous sessions."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Healthcare"),": Patients can refer to past health-related discussions for continuity."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Travel and hospitality"),": Travelers retrieve booking information and preferences from their chat history.")),(0,i.kt)("p",null,"This guide outlines how organizations can configure YM authentication, enabling customers to access their chat histories for a more seamless and personalized experience."),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"configure-ym-authentication-token"},"Configure YM authentication token"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"YM authentication token workflow:")),(0,i.kt)("img",{src:"https://imgur.com/ujFMaNs.png",alt:"drawing",width:"75%"}),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"YM authentication workflow"),": "),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Your backend initiates an API call to Yellow.ai to ",(0,i.kt)("strong",{parentName:"li"},"encrypt")," the YM authentication token."),(0,i.kt)("li",{parentName:"ol"},"The frontend UI uses the encrypted data (payload) to ",(0,i.kt)("strong",{parentName:"li"},"load")," the customized Yellow AI-agent. "),(0,i.kt)("li",{parentName:"ol"},"Yellow's backend ",(0,i.kt)("strong",{parentName:"li"},"validates")," the passed token: ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"If identified and validation is ",(0,i.kt)("strong",{parentName:"li"},"successful"),", the user's previous conversation is loaded onto the AI-agent."),(0,i.kt)("li",{parentName:"ul"},"If validation ",(0,i.kt)("strong",{parentName:"li"},"fails"),", an event is sent to your backend, requesting a new token creation. Your platform generates a new token for the user, serving as a new token for the chat, and tracks the new conversation.")))),(0,i.kt)("p",null,"Steps to configure YM authentication token are mentioned below: "),(0,i.kt)("h3",{id:"--step-1-make-an-api-call-to-encrypt-your-token"},(0,i.kt)("a",{name:"i1"}),"  Step 1: Make an API call to encrypt your token"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Here is the API (cURL request) to encrypt your token"),": "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"curl --location --request POST 'https://{{bot-region}}.cloud.yellow.ai/api/plugin/encryptYmAuth' \\\n--header 'content-type: application/json' \\\n--header 'x-api-key: {{generate api key from platform}}' \\\n--data-raw '{\n    \"ymAuthenticationToken\": {{ymAuthenticationToken}},\n    \"botId\": {{botId}}\n}'\n")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,i.kt)("th",{parentName:"tr",align:null},"Datatype"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"{{ymAuthenticationToken}}")),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"This is the unique identifier (string value that changes for each user and each log-in) assigned to users for validation")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"x-api-key")),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"This is the access key. Generate a new API key with ",(0,i.kt)("strong",{parentName:"td"},"Developer role"),", follow ",(0,i.kt)("a",{parentName:"td",href:"https://docs.yellow.ai/api#generate-api-keys"},"these steps")," on your respective AI-agent")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"{{botId}}")),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"This is your bot ID. It can be obtained by logging into the Yellow platform and copying it from the bot URL. Refer to ",(0,i.kt)("a",{parentName:"td",href:"https://docs.yellow.ai/docs/platform_concepts/Getting%20Started/publish-env#finding-your-bot-id"},"this guide")," to know how")))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Expected response"),": "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "success": true,\n    "message": "Success",\n    "data": {\n        "token": {{encrypted token}}\n    }\n}\n')),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Action on the Yellow.ai backend:")),(0,i.kt)("p",null,"The following details (flags) are set to the respective keys while mapping on the Yellow.ai platform:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"isSecuredYmAuth : true\nymAuthSessionDurationInSec : 1800 (30min default)\n")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,i.kt)("th",{parentName:"tr",align:null},"Datatype"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"ymAuthSessionDurationInSec")),(0,i.kt)("td",{parentName:"tr",align:null},"Numeric"),(0,i.kt)("td",{parentName:"tr",align:null},"This defines the expiry of a token. Each time a token expires, an event is sent to your platform to generate a new token through the API, and the encrypted payload can be sent. This case must be handled on your backend to reload the AI-agent with the fresh token.")))),(0,i.kt)("h3",{id:"step-2-include-the-encrypted-token-in-the-ai-agent-script"},"Step 2: Include the encrypted token in the AI-agent script"),(0,i.kt)("p",null,"Pass the encrypted token in ",(0,i.kt)("inlineCode",{parentName:"p"},"ymAuthenticationToken")," as shown below: "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'window.ymConfig = {\n    "bot": "\xd71655700426047", // Add your bot ID\n    "host": "https://cloud.yellow.ai",\n    "payload": {},\n    "ymAuthenticationToken": "{{userIdentifier}}"\n};\n')),(0,i.kt)("h3",{id:"step-3-validate-the-token-for-successfailure"},"Step 3: Validate the token for success/failure"),(0,i.kt)("h4",{id:"success"},"Success"),(0,i.kt)("p",null,"The YM authentication token is validated, and the chat is successfully loaded. Previous chats can be accessed on the AI-agent."),(0,i.kt)("h4",{id:"failure"},"Failure"),(0,i.kt)("p",null,"Validation fails when the token expires due to customer inactivity. In such situations, a function must be called assigning the ",(0,i.kt)("inlineCode",{parentName:"p"},"refreshUI")," value. Follow these steps:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Add an ",(0,i.kt)("strong",{parentName:"li"},"event listener")," on your platform to identify if the token gets expired in between the conversation of the AI-agent. Use:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Event name"),": ym-revalidate-token"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Data"),": currentToken, refreshUI (true/false value stating if the AI-agent is currently in open state)"))),(0,i.kt)("li",{parentName:"ol"},"Obtain a ",(0,i.kt)("strong",{parentName:"li"},"new encrypted token")," by calling the encrypt API (cURL) mentioned above in ",(0,i.kt)("a",{parentName:"li",href:"#i1"},"Step #1"),"."),(0,i.kt)("li",{parentName:"ol"},"Pass the newly generated encryption token to the AI-agent by calling the below ",(0,i.kt)("strong",{parentName:"li"},"function"),".",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"refreshUI"),"  flag must be passed as false if you want the AI-agent to remain open and show the loading spinner while the input box is disabled. If it is not false, the AI-agent closes and opens again, which might confuse your customer.")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"window.YellowMessengerPlugin.revalidateToken(token: string, refreshUI = true)\n")))),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Click ",(0,i.kt)("a",{parentName:"p",href:"https://docs.yellow.ai/docs/platform_concepts/mobile/chatbot/secure-ymauth"},"here")," to learn how to add YMAuth token for Mobile SDK.   ")))}d.isMDXComponent=!0}}]);