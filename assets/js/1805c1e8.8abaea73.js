"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[51834],{28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>l});var t=s(96540);const o={},r=t.createContext(o);function i(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),t.createElement(r.Provider,{value:n},e.children)}},46716:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"platform_concepts/channelConfiguration/whatsapp-forms","title":"Setup WhatsApp forms","description":"WhatsApp (WA) forms are predefined structured interactions in WhatsApp AI-agents. The forms are designed to guide users through specific tasks or conversations. These forms facilitate various actions, including:","source":"@site/docs/platform_concepts/channelConfiguration/whatsapp-forms.md","sourceDirName":"platform_concepts/channelConfiguration","slug":"/platform_concepts/channelConfiguration/whatsapp-forms","permalink":"/docs/platform_concepts/channelConfiguration/whatsapp-forms","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Setup WhatsApp forms","sidebar_label":"Setup WhatsApp forms"},"sidebar":"platform_concepts","previous":{"title":"Get WhatsApp opt-in","permalink":"/docs/platform_concepts/channelConfiguration/wa-opt-in"},"next":{"title":"Create WhatsApp bot","permalink":"/docs/platform_concepts/channelConfiguration/WA-bot-bestpractices"}}');var o=s(74848),r=s(28453);const i={title:"Setup WhatsApp forms",sidebar_label:"Setup WhatsApp forms"},l=void 0,c={},a=[{value:"Create a form",id:"create-a-form",level:2},{value:"Integrate WhatsApp form with your Bot",id:"integrate-whatsapp-form-with-your-bot",level:4}];function h(e){const n={a:"a",code:"code",h2:"h2",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"WhatsApp (WA) forms are predefined structured interactions in WhatsApp AI-agents. The forms are designed to guide users through specific tasks or conversations. These forms facilitate various actions, including:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Scheduling and confirming appointments"}),": Users can easily confirm bookings through guided steps."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Collecting user feedback"}),": Businesses can gather valuable feedback by displaying users with structured questions."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Collecting user information"}),": Businesses can collect required user data, such as contact details, preferences, or other relevant information."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Here is how a sample WhatsApp form look in a chatbot:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://imgur.com/Bw4inNd.png",alt:""})}),"\n",(0,o.jsx)(n.h2,{id:"create-a-form",children:"Create a form"}),"\n",(0,o.jsxs)(n.p,{children:["To set up a form for WhatsApp, you should have a ",(0,o.jsx)(n.a,{href:"https://docs.yellow.ai/docs/platform_concepts/channelConfiguration/whatsapp-configuration#connect-your-whatsapp-business-account",children:"WhatsApp Business Account"})," (WABA). Each form is assigned a unique flow ID, which can be found next to the flow name or within the flow URL. For detailed instructions, refer to ",(0,o.jsx)(n.a,{href:"https://developers.facebook.com/docs/whatsapp/flows/reference/flowjson",children:"Facebook's documentation"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"To create a form, follow these steps:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Log on to ",(0,o.jsx)(n.a,{href:"https://business.facebook.com/settings",children:"Facebook Business Manager"})," (FBM)."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Navigate to ",(0,o.jsx)(n.strong,{children:"Account tools"})," > ",(0,o.jsx)(n.strong,{children:"Flows"}),"."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://imgur.com/RJQzTac.png",alt:""})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["In ",(0,o.jsx)(n.strong,{children:"Create flow"})," section, enter the ",(0,o.jsx)(n.strong,{children:"Name"})," of the flow"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Select your preferred template. Choose either with endpoint or without endpoint, depending on your use case."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Choose a category based on your business use case."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Click ",(0,o.jsx)(n.strong,{children:"Create"}),"."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://imgur.com/t4hqnUd.png",alt:""})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["You can view the selected endpoint URL under the ",(0,o.jsx)(n.strong,{children:"Preview"})," section."]}),"\n",(0,o.jsx)("img",{src:"https://imgur.com/VgBi8Gi.png",alt:"drawing",width:"70%"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["This will create a form in draft mode. You can modify this form as required by editing the JSON script. Refer to the ",(0,o.jsx)(n.a,{href:"https://developers.facebook.com/docs/whatsapp/flows/reference/components",children:"Facebook documentation"})," to learn more about the syntax as well as the components to build the Form."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.ol,{start:"7",children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Under ",(0,o.jsx)(n.strong,{children:"Edit"})," flow, click the ",(0,o.jsx)(n.strong,{children:"Setup"})," icon. Ensure that the flow version is set to ",(0,o.jsx)(n.code,{children:"Version: 6.0"})," and the ",(0,o.jsx)(n.code,{children:"data_api_version: 3.0"}),"."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://imgur.com/OfLfoGv.png",alt:""})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Once you have finished modifying the script and running successfully, you need to set up the endpoint."}),"\n"]}),"\n",(0,o.jsxs)(n.ol,{start:"8",children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"To set up the endpoint URI, use the following Node.js script to generate an encrypted key."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://imgur.com/109mCgM.png",alt:""})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Setup the endpoint URI as explained below:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Login to ",(0,o.jsx)(n.a,{href:"https://cloud.yellow.ai/",children:"Yellow.ai"})," platform."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Go to ",(0,o.jsx)(n.strong,{children:"Channels"})," > ",(0,o.jsx)(n.strong,{children:"WhatsApp messenger"})," > ",(0,o.jsx)(n.strong,{children:"Meta flow"}),"."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://cdn.yellowmessenger.com/assets/yellow-docs/WAmessenger.png",alt:""})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["In the Meta flows section, ",(0,o.jsx)(n.strong,{children:"copy the Endpoint URL"}),". Sample endpoint URL: ",(0,o.jsx)(n.code,{children:"https://{{host_name}}/integrations/whatsapp/extension/channel/{{encryted_key}}"})]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://cdn.yellowmessenger.com/assets/yellow-docs/copyWAendURL.png",alt:""})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Go to ",(0,o.jsx)(n.a,{href:"https://business.facebook.com/settings",children:"Facebook Business Manager"}),", paste the copied ",(0,o.jsx)(n.strong,{children:"Endpoint URL"})," in the ",(0,o.jsx)(n.strong,{children:"Set Endpoint URI"})," field and click Submit."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://cdn.yellowmessenger.com/assets/yellow-docs/setendpoint.png",alt:""})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["After configuring the endpoint URL, contact the ",(0,o.jsx)(n.a,{href:"mailto:customersuccess@yellow.ai",children:"platform support team"})," to connect the Meta App. Provide the Flow ID, Bot ID, and the associated WhatsApp number. Note that once submitted, the Meta App cannot be changed."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["In ",(0,o.jsx)(n.strong,{children:"Add phone number"}),", enter the phone number for which you want to create the form and test it."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["In ",(0,o.jsx)(n.strong,{children:"Sign public key"}),", enter the Endpoint URI provided by the delivery team. Contact the delivery team to obtain the URI."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://imgur.com/xkQPeHo.png",alt:""})}),"\n",(0,o.jsxs)(n.ol,{start:"8",children:["\n",(0,o.jsxs)(n.li,{children:["Select ",(0,o.jsx)(n.strong,{children:"Connect Meta app"})," to enable communication between the flow and your endpoint."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://imgur.com/I7hILAm.png",alt:""})}),"\n",(0,o.jsxs)(n.ol,{start:"9",children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["In ",(0,o.jsx)(n.strong,{children:"Health check"}),", verify if the endpoint URL is responding correctly."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Click ",(0,o.jsx)(n.strong,{children:"Submit"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"integrate-whatsapp-form-with-your-bot",children:"Integrate WhatsApp form with your Bot"}),"\n",(0,o.jsx)(n.p,{children:"Once you have created your WhatsApp forms, you can use them in your AI agent's (bot) flow as explained below:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Create an ",(0,o.jsx)(n.code,{children:"initExtensionWA"})," on the bot by adding the following function to the bot:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'return new Promise(resolve => {\n   let payload = {\n       finalData: {}\n   }\n   console.log("==logging initScreen 1st function==", payload)\n   resolve({ data: payload });\n});\n'})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsxs)(n.li,{children:["To log the data from the Whatsapp form, create another function called ",(0,o.jsx)(n.code,{children:"leadGenFunction"}),". You need to use this function in your bot journey after executing step 5."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:'return new Promise(resolve => {\n   // Step 1: Construct the payload for extension_message_response\n   console.log("logging Data from WA Form", data)\n   // Step 2: Create a wrapper object for the payload\n   let val = {\n       finalData: {}\n   };\n   resolve({ data: val });\n}) \n'})}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Navigate to ",(0,o.jsx)(n.strong,{children:"Channels"})," > ",(0,o.jsx)(n.strong,{children:"WhatsApp messenger"})," > ",(0,o.jsx)(n.strong,{children:"Meta flow"})," > ",(0,o.jsx)(n.strong,{children:"Publish flow"}),"."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://cdn.yellowmessenger.com/assets/yellow-docs/publishflow.png",alt:""})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["In ",(0,o.jsx)(n.strong,{children:"Flow configuration"}),", choose the flow that you have created in ",(0,o.jsx)(n.a,{href:"https://business.facebook.com/settings",children:"Facebook Business Manager"}),"(FBM)."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://cdn.yellowmessenger.com/assets/yellow-docs/selectflowmeta.png",alt:""})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Open your selected flow in FBM and ",(0,o.jsx)(n.strong,{children:"copy the JSON"})," from the Meta Flow builder."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://cdn.yellowmessenger.com/assets/yellow-docs/copyjson.png",alt:""})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Go to Flow configuration section, ",(0,o.jsx)(n.strong,{children:"paste the copied JSON"})," in ",(0,o.jsx)(n.strong,{children:"Add JSON file from Met"}),"a, then click Next."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://cdn.yellowmessenger.com/assets/yellow-docs/jsonpaste.png",alt:""})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["In ",(0,o.jsx)(n.strong,{children:"INIT"})," section, click ",(0,o.jsx)(n.strong,{children:"+ Add"})," and choose a ",(0,o.jsx)(n.strong,{children:"Function"}),", ",(0,o.jsx)(n.strong,{children:"API"}),", or ",(0,o.jsx)(n.strong,{children:"Database"})," depending on what action your flow needs."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://cdn.yellowmessenger.com/assets/yellow-docs/select3.png",alt:""})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Click ",(0,o.jsx)(n.strong,{children:"Next"})," to continue."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["In ",(0,o.jsx)(n.strong,{children:"Review & publish"}),", enter your phone number to test the bot and click ",(0,o.jsx)(n.strong,{children:"Test"}),"."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://cdn.yellowmessenger.com/assets/yellow-docs/testwa.png",alt:""})}),"\n",(0,o.jsxs)(n.ol,{start:"10",children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["After testing, click ",(0,o.jsx)(n.strong,{children:"Publish flow"})," to make your bot live."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://cdn.yellowmessenger.com/assets/yellow-docs/publishWAflow.png",alt:""})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"A sample whatsApp form bot flow:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://imgur.com/9HwnRIw.png",alt:""})})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}}}]);