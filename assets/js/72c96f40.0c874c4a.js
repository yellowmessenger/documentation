"use strict";(self.webpackChunkbenthos=self.webpackChunkbenthos||[]).push([[94500],{28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>c});var s=n(96540);const o={},r=s.createContext(o);function i(e){const t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(r.Provider,{value:t},e.children)}},71441:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>a,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"platform_concepts/channelConfiguration/event-widget","title":"Chat widget events","description":"Bot events are the actions that occur within a chatbot when specific actions are performed during the conversation. Events are triggered when a user clicks on button links, opens, or closes the chatbot.","source":"@site/docs/platform_concepts/channelConfiguration/event-widget.md","sourceDirName":"platform_concepts/channelConfiguration","slug":"/platform_concepts/channelConfiguration/event-widget","permalink":"/docs/platform_concepts/channelConfiguration/event-widget","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Chat widget events","sidebar_label":"Chat widget events"},"sidebar":"platform_concepts","previous":{"title":"Chat widget functions","permalink":"/docs/platform_concepts/channelConfiguration/function-widgets"},"next":{"title":"Chrome extension","permalink":"/docs/platform_concepts/channelConfiguration/chrome-extension"}}');var o=n(74848),r=n(28453);const i={title:"Chat widget events",sidebar_label:"Chat widget events"},c=void 0,d={},l=[{value:"Send event to bot",id:"send-event-to-bot",level:2},{value:"Listen to a bot event",id:"listen-to-a-bot-event",level:2},{value:"Supported events",id:"supported-events",level:2},{value:"How to trigger bot-opened and bot-closed events",id:"how-to-trigger-bot-opened-and-bot-closed-events",level:3},{value:"Prerequisites to trigger bot-opened and bot-closed events",id:"prerequisites-to-trigger-bot-opened-and-bot-closed-events",level:4},{value:"Trigger bot-opened and bot-closed events",id:"trigger-bot-opened-and-bot-closed-events",level:4}];function h(e){const t={admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"Bot events are the actions that occur within a chatbot when specific actions are performed during the conversation. Events are triggered when a user clicks on button links, opens, or closes the chatbot."}),"\n",(0,o.jsx)(t.p,{children:"You can use these events to trigger specific bot flows, run campaigns, or perform any other actions based on your requirements."}),"\n",(0,o.jsx)(t.h2,{id:"send-event-to-bot",children:"Send event to bot"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"// find the yellow.ai widget iframe\nconst ymIframe = document.getElementById('ymIframe');\n// event_name should be a valid name supported by the widget.\nconst message = JSON.stringify({code: 'event_name', data: {...}});\n// send a cross-site message using \n// window.postMessage(message, targetOrigin, transfer) API.\nymIframe.contentWindow?.postMessage(message, window.location.origin);\n"})}),"\n",(0,o.jsx)(t.h2,{id:"listen-to-a-bot-event",children:"Listen to a bot event"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:'<script type="text/javascript">\n         window.addEventListener(\'message\', function(eventData) {\n\t\t\t\t\t\t\t// make sure to verify origin to prevent XSS attacks.\n\t\t\t\t\t\t\t// https://blog.yeswehack.com/yeswerhackers/introduction-postmessage-vulnerabilities/\n\t\t\t\t\t\t\t// if (event.origin !== <your_origin>) throw new Error(\'Message not allowed");\n            console.log(eventData,"eventData");\n         })\n<\/script>\n'})}),"\n",(0,o.jsx)(t.h2,{id:"supported-events",children:"Supported events"}),"\n",(0,o.jsx)(t.p,{children:"The following are some of the events supported by our chat widget:"}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{children:"Event"}),(0,o.jsx)(t.th,{children:"Description"})]})}),(0,o.jsxs)(t.tbody,{children:[(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"bot-opened"}),(0,o.jsx)(t.td,{children:"This event occurs when a user clicks on the chat bubble to open the bot on a website. For Progressive Web App (PWA), it triggers when the bot loads."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"bot-closed"}),(0,o.jsx)(t.td,{children:"This event is triggered when the user closes the bot on the website."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"bot-loaded-on-page-reload"}),(0,o.jsx)(t.td,{children:"This event is triggered  when the user reloads the current bot page or when the page reloads automatically."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"ym_home"}),(0,o.jsx)(t.td,{children:"This event occurs when the user clicks the home icon in the bot."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"ym_closed_promotion"}),(0,o.jsx)(t.td,{children:"This event occurs when the user closes any promotional content displayed within the chat widget."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"page-url-based-trigger"}),(0,o.jsx)(t.td,{children:"This event occurs based on a specific URL or webpage. When the URL matches the loading page URL, a specific journey is triggered."})]})]})]}),"\n",(0,o.jsx)(t.h3,{id:"how-to-trigger-bot-opened-and-bot-closed-events",children:"How to trigger bot-opened and bot-closed events"}),"\n",(0,o.jsxs)(t.p,{children:["When a user clicks on the chat bubble to open the bot, the ",(0,o.jsx)(t.code,{children:"bot-opened"})," event is triggered, and when the user closes the bot interface, the ",(0,o.jsx)(t.code,{children:"bot-closed"})," event is triggered. These events can then be used to initiate specific flows or perform other actions based on the user's interaction with the bot."]}),"\n",(0,o.jsx)(t.h4,{id:"prerequisites-to-trigger-bot-opened-and-bot-closed-events",children:"Prerequisites to trigger bot-opened and bot-closed events"}),"\n",(0,o.jsx)(t.p,{children:"You need to follow the below prerequisites to trigger bot-opened and bot-closed events."}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["Navigate to ",(0,o.jsx)(t.strong,{children:"Deploy"})," > ",(0,o.jsx)(t.strong,{children:"Web"})," > ",(0,o.jsx)(t.strong,{children:"Experience on a Website"}),"."]}),"\n",(0,o.jsx)("img",{src:"https://imgur.com/tTJJYgQ.png",width:"70%"}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["On the live chatbot page, ",(0,o.jsx)(t.strong,{children:"right-click"})," > ",(0,o.jsx)(t.strong,{children:"Inspect"})," > ",(0,o.jsx)(t.strong,{children:"Network tab"}),"."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://imgur.com/TWyhnPO.png",alt:""})}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["To view the API call details, ",(0,o.jsx)(t.strong,{children:"Refresh"})," your page and select ",(0,o.jsx)(t.strong,{children:"bot-load-details"}),"."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://imgur.com/Br4Hp7q.png",alt:""})}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["Expand the skin of the widget to see that ",(0,o.jsx)(t.code,{children:"sendEventOnOpen"})," and ",(0,o.jsx)(t.code,{children:"sendEventOnClose"})," options are set to true."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://imgur.com/soC1CBK.png",alt:""})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(t.h4,{id:"trigger-bot-opened-and-bot-closed-events",children:"Trigger bot-opened and bot-closed events"}),"\n",(0,o.jsx)(t.p,{children:"To trigger bot-opened and bot-closed events, follow these steps:"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["Select the respective environment and go to ",(0,o.jsx)(t.strong,{children:"Automation"})," > ",(0,o.jsx)(t.strong,{children:"Event"})," > ",(0,o.jsx)(t.strong,{children:"Widget"}),"."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://imgur.com/klf1W9f.png",alt:""})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(t.admonition,{type:"note",children:(0,o.jsx)(t.p,{children:"In the Live environment, you cannot enable the events."})}),"\n",(0,o.jsxs)(t.ol,{start:"2",children:["\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["Navigate to the ",(0,o.jsx)(t.strong,{children:"bot-opened"})," and ",(0,o.jsx)(t.strong,{children:"bot-closed"})," events, click on the ",(0,o.jsx)(t.strong,{children:"More options"})," icon > ",(0,o.jsx)(t.strong,{children:"Activate"}),"."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://imgur.com/QeTrWwP.png",alt:""})}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["Go ",(0,o.jsx)(t.strong,{children:"Build"})," > select the flow for which you want to trigger the event > select the start trigger as ",(0,o.jsx)(t.strong,{children:"Event"})," and include either bot-opened or bot-closed event in the start node based on your preferred choice."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://imgur.com/NeCOJPE.png",alt:""})}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsx)(t.p,{children:"Refresh the Live bot page and open the bot to view the triggered flow based on the selected event."}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://imgur.com/NFNrOfs.png",alt:""})}),"\n"]}),"\n"]})]})}function a(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}}}]);